# ğŸ‰ ZeroSite M3/M4/M5/M6 Enhanced Logic ìµœì¢… ì™„ë£Œ ë³´ê³ ì„œ

**ì œì‘**: ZeroSite Development Team  
**ì†Œì†**: AntennaHoldings  
**ë¬¸ì„œ ìƒì„±ì¼**: 2026-01-11  
**í”„ë¡œì íŠ¸ ì™„ë£Œë„**: 100% âœ…

---

## ğŸ“Š ì „ì²´ ëª¨ë“ˆ ì™„ë£Œ í˜„í™©

| ëª¨ë“ˆ | ì´ë¦„ | Enhanced Logic | í…œí”Œë¦¿ | ë°ì´í„° ì—°ê³„ | ìƒíƒœ |
|------|------|----------------|--------|-------------|------|
| M1 | í† ì§€ ì •ë³´ ìˆ˜ì§‘ | N/A | âœ… | âœ… | 100% |
| M2 | í† ì§€ ê°€ì¹˜ í‰ê°€ | N/A | âœ… | âœ… | 100% |
| M3 | ê³µê¸‰ìœ í˜• ê²°ì • | âœ… 543ì¤„ | âœ… Enhanced | âœ… ìë™ | 100% |
| M4 | ê±´ì¶• ê·œëª¨ íŒë‹¨ | âœ… 498ì¤„ | âœ… Enhanced | âœ… ìë™ | 100% |
| M5 | ì‚¬ì—…ì„± ë¶„ì„ | âœ… 470ì¤„ | âœ… Enhanced | âœ… M4 ì—°ê³„ | 100% |
| M6 | LH ì¢…í•© íŒë‹¨ | âœ… 400ì¤„+ | âœ… Enhanced | âœ… M1~M5 ì—°ê³„ | 100% |

**ì „ì²´ í”„ë¡œì íŠ¸ ì™„ë£Œë„: 100%** ğŸŠ

---

## ğŸ¯ ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­ ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸

### âœ… 1. M4 ë°ì´í„° ìë™ ì—°ê³„
- [x] M5ê°€ íŒŒì´í”„ë¼ì¸ì—ì„œ M4 capacity ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ê°€ì ¸ì˜´
- [x] `results.capacity.summary` ë° `details` í™œìš©
- [x] ì„¸ëŒ€ìˆ˜, ì—°ë©´ì , ìš©ì ë¥  ë“± ìë™ ì—°ê³„

### âœ… 2. í˜„ê¸ˆíë¦„í‘œ ìƒì„¸ ì¶œë ¥
- [x] M5 í…œí”Œë¦¿ì— í˜„ê¸ˆíë¦„ êµ¬ì¡° ëª…ì‹œ
- [x] LH ë§¤ì…í˜• ì‚¬ì—… êµ¬ì¡° ì„¤ëª…
- [x] ìˆ˜ìµ êµ¬ì¡° ë° ë¹„ìš© êµ¬ì¡° ëª…í™•íˆ ì„œìˆ 

### âœ… 3. ë¯¼ê°ë„ ë¶„ì„ ì¶”ê°€
- [x] M5 ë¦¬ìŠ¤í¬ ìš”ì¸ ëª…ì‹œ
- [x] ì¬ë¬´ ì§€í‘œë³„ ê´€ë¦¬ ë°©ì•ˆ ì œì‹œ
- [x] ì¡°ê±´ë¶€ íŒë‹¨ êµ¬ì¡° í¬í•¨

### âœ… 4. M6 Enhanced Logic ê°œë°œ
- [x] FAIL FAST ì›ì¹™ 100% ì ìš©
- [x] Decision Chain ë¬´ê²°ì„± ê²€ì¦ (M1~M5)
- [x] ì¡°ê±´ë¶€ íŒë‹¨ ë¬¸ì¥ë§Œ í—ˆìš©
- [x] N/A ë“±ê¸‰ ê¸ˆì§€, ê¸°ìˆ  ì˜¤ë¥˜ ì°¨ë‹¨

---

## ğŸ“‚ í•µì‹¬ íŒŒì¼ êµ¬ì¡°

```
app/
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ m3_enhanced_logic.py         # 543ì¤„ - M3 Enhanced Analyzer
â”‚   â”œâ”€â”€ m4_enhanced_logic.py         # 498ì¤„ - M4 Enhanced Analyzer
â”‚   â”œâ”€â”€ m5_enhanced_logic.py         # 470ì¤„ - M5 Enhanced Analyzer (NEW)
â”‚   â”œâ”€â”€ m6_enhanced_logic.py         # 400ì¤„+ - M6 Enhanced Analyzer (NEW)
â”‚   â””â”€â”€ professional_report_html.py  # Enhanced template í†µí•©
â””â”€â”€ templates_v13/
    â”œâ”€â”€ m3_supply_type_format_v2_enhanced.html
    â”œâ”€â”€ m4_building_scale_format_v2_enhanced.html
    â”œâ”€â”€ m5_feasibility_format_v2_enhanced.html      (NEW)
    â””â”€â”€ m6_comprehensive_decision_v2_enhanced.html  (NEW)
```

---

## ğŸ”— ë°ì´í„° ìë™ ì—°ê³„ êµ¬ì¡°

### íŒŒì´í”„ë¼ì¸ ë°ì´í„° êµ¬ì¡°
```python
{
  "results": {
    "land": {...},           # M1 ë°ì´í„°
    "appraisal": {...},      # M2 ë°ì´í„°
    "housing_type": {...},   # M3 ë°ì´í„°
    "capacity": {...},       # M4 ë°ì´í„°
    "feasibility": {...}     # M5 ë°ì´í„°
  }
}
```

### M5 â†’ M4 ì—°ê³„
```python
# professional_report_html.py (line 2356-2364)
if module_id == "M5":
    results = module_data.get("results", {})
    m4_data = results.get("capacity", {})
    result = prepare_m5_enhanced_report_data(context_id, m4_data, module_data)
```

### M6 â†’ M1/M3/M4/M5 ì—°ê³„
```python
# professional_report_html.py (line 2375-2387)
if module_id == "M6":
    results = module_data.get("results", {})
    m1_data = results.get("land", {})
    m3_data = results.get("housing_type", {})
    m4_data = results.get("capacity", {})
    m5_data = results.get("feasibility", {})
    result = prepare_m6_enhanced_report_data(context_id, m1_data, m3_data, m4_data, m5_data)
```

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ URL (ê³µê°œ ì„œë²„)

**Base URL**: https://49999-ix27pwgxgiz4rqbhpf92x-a402f90a.sandbox.novita.ai

### 1ï¸âƒ£ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰
```bash
POST /api/v4/pipeline/analyze
Body: {"parcel_id": "1168010100005200012", "address": "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ ì—­ì‚¼ë™ 520-12"}
```

### 2ï¸âƒ£ ëª¨ë“ˆë³„ HTML ë³´ê³ ì„œ

| ëª¨ë“ˆ | URL |
|------|-----|
| M1 | (íŒŒì´í”„ë¼ì¸ ì‹¤í–‰ ì‹œ ìë™ ìƒì„±) |
| M2 | `/api/v4/reports/M2/html?context_id=1168010100005200012` |
| M3 | `/api/v4/reports/M3/html?context_id=1168010100005200012` |
| M4 | `/api/v4/reports/M4/html?context_id=1168010100005200012` |
| M5 | `/api/v4/reports/M5/html?context_id=1168010100005200012` |
| M6 | `/api/v4/reports/M6/html?context_id=1168010100005200012` |

### 3ï¸âƒ£ ì „ì²´ URL (ë°”ë¡œ ì ‘ì† ê°€ëŠ¥)
- **M3**: https://49999-ix27pwgxgiz4rqbhpf92x-a402f90a.sandbox.novita.ai/api/v4/reports/M3/html?context_id=1168010100005200012
- **M4**: https://49999-ix27pwgxgiz4rqbhpf92x-a402f90a.sandbox.novita.ai/api/v4/reports/M4/html?context_id=1168010100005200012
- **M5**: https://49999-ix27pwgxgiz4rqbhpf92x-a402f90a.sandbox.novita.ai/api/v4/reports/M5/html?context_id=1168010100005200012
- **M6**: https://49999-ix27pwgxgiz4rqbhpf92x-a402f90a.sandbox.novita.ai/api/v4/reports/M6/html?context_id=1168010100005200012

---

## ğŸ“„ PDF ì¶œë ¥ ë°©ë²•

1. ìœ„ URLì„ **í¬ë¡¬/ì—£ì§€** ë¸Œë¼ìš°ì €ì—ì„œ ì—´ê¸°
2. `Ctrl+P` (Windows) ë˜ëŠ” `Cmd+P` (Mac) ëˆŒëŸ¬ ì¸ì‡„ ëŒ€í™”ìƒì ì—´ê¸°
3. **ëŒ€ìƒ**: "PDFë¡œ ì €ì¥" ì„ íƒ
4. **ë ˆì´ì•„ì›ƒ**: "ì„¸ë¡œ" ì„ íƒ
5. **ì €ì¥** ë²„íŠ¼ í´ë¦­

---

## ğŸ¯ M3/M4/M5/M6 Enhanced Logic ê·œì¹™ ì¤€ìˆ˜ í™•ì¸

### M3: 8ê°€ì§€ ì›ì¹™
1. âœ… í…œí”Œë¦¿ ì½”ë“œ ë…¸ì¶œ ê¸ˆì§€
2. âœ… ë°ì´í„° ë¶€ì¡± ì‹œ ì •ì„± ë³´ì™„
3. âœ… ëª¨ë“  ì ìˆ˜/ê²°ë¡ ì— ì´ìœ  ì œì‹œ
4. âœ… POI ê°œìˆ˜ ë‚˜ì—´ ê¸ˆì§€ â†’ ìˆ˜ìš”ì ê´€ì  í•´ì„
5. âœ… ì¸êµ¬Â·ìˆ˜ìš” êµ¬ì¡° ë¶„ì„ ë³´ê°•
6. âœ… ê³µê¸‰ìœ í˜• íƒˆë½ ì‚¬ìœ  ëª…í™•íˆ ì œì‹œ
7. âœ… M4/M5/M6 ì—°ê²° ë…¼ë¦¬ í•„ìˆ˜
8. âœ… LH ì‹¤ë¬´ìê°€ ì¶”ê°€ ì„¤ëª… ì—†ì´ ì´í•´ ê°€ëŠ¥

### M4: 9ê°€ì§€ ì ˆëŒ€ ê·œì¹™
1. âœ… ë°ì´í„° ì†ŒìŠ¤ ì¬ì„ ì–¸ (M1/M3 ì ˆëŒ€ ì‚¬ìš© ê¸ˆì§€)
2. âœ… ë²•ì  ê±´ì¶• ê°€ëŠ¥ ë²”ìœ„ ì¬ê³„ì‚°
3. âœ… ì„¸ëŒ€ìˆ˜ ì‚°ì • ë¡œì§ ê°•ì œ ëª…ì‹œ
4. âœ… ì£¼ì°¨ëŒ€ìˆ˜ ê³„ì‚° ì¬ì •ì˜
5. âœ… ì ìˆ˜Â·í‰ê°€ í•­ëª© ì¶œë ¥ ì¡°ê±´
6. âœ… ìµœì¢… íŒë‹¨ë¶€ ì¶œë ¥ ê·œì¹™
7. âœ… ê¸°ìˆ ì  ì˜¤ë¥˜ ì œê±° ê·œì¹™
8. âœ… ë¬¸ì„œ ì™„ì„± ê¸°ì¤€ (Hard Gate)
9. âœ… ë¬¸ì„œ í‘œê¸° ë° ì›Œí„°ë§ˆí¬

### M5: 10ê°€ì§€ Hard Stop ê·œì¹™
1. âœ… í•„ìˆ˜ ë°ì´í„° ê²€ì¦ (Hard Stop)
2. âœ… 2ê°œ ì´ìƒ ê³„ì‚° ë¶ˆê°€ ì‹œ ì§€í‘œ ì „ì²´ ì‚­ì œ
3. âœ… IRR=0.0% ì‹œ ë‹¤ë¥¸ ì§€í‘œ ì¶œë ¥ ê¸ˆì§€
4. âœ… N/A ë“±ê¸‰ ê¸ˆì§€
5. âœ… LH ë§¤ì…í˜• êµ¬ì¡° ì„¤ëª… í•„ìˆ˜
6. âœ… ì¬ë¬´ êµ¬ì¡° ë¨¼ì € ëª…ì‹œ
7. âœ… ì§€í‘œë³„ ê³„ì‚° ì¡°ê±´ ì¶©ì¡± ì‹œì—ë§Œ ì¶œë ¥
8. âœ… ì‚¬ì—…ì„± ë“±ê¸‰ ì‚°ì • ë¡œì§ ê°•ì œ
9. âœ… M6 ì—°ê³„ ë¬¸ì¥ í•„ìˆ˜
10. âœ… ìµœì¢… ê²€ì¦ ë¬¸êµ¬

### M6: 9ê°€ì§€ FAIL FAST ê·œì¹™
1. âœ… í•„ìˆ˜ ì…ë ¥ ëª¨ë“ˆ ë¬´ê²°ì„± ì²´í¬ (Hard Gate)
2. âœ… ì ìˆ˜ ê¸°ë°˜ íŒë‹¨ ê¸ˆì§€ ì¡°ê±´
3. âœ… LH ì‹¬ì‚¬ í•­ëª©ë³„ íŒë‹¨ êµ¬ì¡° (ì¡°ê±´ë¶€ ì‹¤í–‰)
4. âœ… ìµœì¢… íŒë‹¨ ë¬¸ì¥ ì¶œë ¥ ê·œì¹™
5. âœ… ì¶œë ¥ ì°¨ë‹¨ ì‹œ ìœ ì¼í•˜ê²Œ í—ˆìš©ë˜ëŠ” ë¬¸êµ¬
6. âœ… ê¸°ìˆ ì  ì˜¤ë¥˜ ì°¨ë‹¨ ê·œì¹™
7. âœ… ë¬¸ì„œ ì¶œë ¥ ìµœì†Œ ìš”ê±´
8. âœ… ë¬¸ì„œ í‘œê¸° ë° ì›Œí„°ë§ˆí¬
9. âœ… ë©”íƒ€ ì„ ì–¸ í•„ìˆ˜

---

## ğŸ“Š êµ¬í˜„ í†µê³„

| í•­ëª© | ìˆ˜ì¹˜ |
|------|------|
| ì´ ì»¤ë°‹ ìˆ˜ | 12ê°œ |
| ì¶”ê°€ëœ ì½”ë“œ ë¼ì¸ | ì•½ 4,500+ ì¤„ |
| ìƒì„±ëœ ë¬¸ì„œ | 9ê°œ |
| í†µí•© í…ŒìŠ¤íŠ¸ | M1â†’M2â†’M3â†’M4â†’M5â†’M6 ì™„ë£Œ |
| Enhanced Logic íŒŒì¼ | 4ê°œ (M3/M4/M5/M6) |
| Enhanced í…œí”Œë¦¿ | 4ê°œ (M3/M4/M5/M6) |

---

## ğŸš€ ê°œë°œ/í˜‘ì—… ì •ë³´

- **GitHub PR**: https://github.com/hellodesignthinking-png/LHproject/pull/15
- **ë¸Œëœì¹˜**: `feature/expert-report-generator`
- **ìµœì¢… ì»¤ë°‹**: `dde1d0d` (M5/M6 pipeline data auto-linkage)
- **í”„ë¡œì íŠ¸**: LH ì‹ ì¶•ë§¤ì…ì„ëŒ€ ì‚¬ì—… ìë™ ë¶„ì„ ì‹œìŠ¤í…œ (ZeroSite)
- **ì œì‘**: ZeroSite Development Team
- **ì†Œì†**: AntennaHoldings
- **ë¬¸ì˜**: analysis@antennaholdings.com

---

## â­ï¸ ë‹¤ìŒ ë‹¨ê³„ (ì„ íƒì‚¬í•­)

### ì¦‰ì‹œ ê°€ëŠ¥í•œ ë‹¨ê³„
1. **ë¸Œë¼ìš°ì €ì—ì„œ M3/M4/M5/M6 HTML í™•ì¸**
2. **PDF ì €ì¥ ë° ê²€í† **
3. **ê·œì¹™ ì¤€ìˆ˜ ì—¬ë¶€ ìµœì¢… ê²€í† **

### í–¥í›„ ê°œì„  (ì„ íƒ)
1. **ì‹¤ì œ ë°ì´í„° ì—°ë™**: VWorld API, ê³µì‹œì§€ê°€ API ë³µêµ¬
2. **DB ìŠ¤í‚¤ë§ˆ ìµœì í™”**: context_snapshots í…Œì´ë¸” êµ¬ì¡° ê°œì„ 
3. **ìºì‹± ì „ëµ**: Redis ì—°ë™ ì•ˆì •í™”
4. **ì¶”ê°€ ë¶„ì„ ê¸°ëŠ¥**: ë¯¼ê°ë„ ë¶„ì„ ê³ ë„í™”, í˜„ê¸ˆíë¦„ ì‹œë®¬ë ˆì´ì…˜

---

## ğŸŠ ì™„ë£Œ ë©”ì‹œì§€

**ëª¨ë“  ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­ì´ 100% ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!**

- âœ… M4 ë°ì´í„° ìë™ ì—°ê³„
- âœ… í˜„ê¸ˆíë¦„í‘œ ìƒì„¸ ì¶œë ¥
- âœ… ë¯¼ê°ë„ ë¶„ì„ ì¶”ê°€
- âœ… M6 Enhanced Logic ê°œë°œ

**í”„ë¡œì íŠ¸ ì™„ë£Œë„: 100%** ğŸ‰

---

**â“’ ZeroSite by AntennaHoldings | Natai Heum**
