# ğŸ”§ ZeroSite 4.0 - 6ì¢… ë³´ê³ ì„œ ì—°ê²° ì˜¤ë¥˜ ìˆ˜ì • ì™„ë£Œ

## ğŸ“‹ ë¬¸ì œ ì§„ë‹¨

### í˜„ì¬ ìƒí™©
> **"ì—”ì§„(M1~M6)ì€ 4.0 ìˆ˜ì¤€ì¸ë°, 6ì¢… ë³´ê³ ì„œëŠ” ì•„ì§ 3.x ë°©ì‹ìœ¼ë¡œ ê°ì ë§í•˜ê³  ìˆë‹¤."**

- M1~M6 íŒŒì´í”„ë¼ì¸: âœ… ì •ìƒ ì‘ë™ (v4.0)
- 6ì¢… ë³´ê³ ì„œ: âŒ ë…¼ë¦¬ íë¦„ ë¶ˆì¼ì¹˜ (v3.x)

### í•µì‹¬ ë¬¸ì œ
1. **M6ì´ ìœ ì¼í•œ íŒë‹¨ì¸ë°** ê° ë³´ê³ ì„œê°€ ë…ë¦½ì ìœ¼ë¡œ ê²°ë¡  ë„ì¶œ
2. **ì ìˆ˜/íŒë‹¨/í‘œí˜„**ì´ ë³´ê³ ì„œë§ˆë‹¤ ë‹¤ë¦„
3. **M1~M5ê°€ ê·¼ê±° ë°ì´í„°**ì¸ë° ê²°ë¡ ì²˜ëŸ¼ ë³´ì´ëŠ” êµ¬ì„±
4. **ê²°ë¡  ë¬¸ì¥**ì´ ë³´ê³ ì„œë§ˆë‹¤ ìƒì´

---

## âœ… ìˆ˜ì • ì™„ë£Œ ì‚¬í•­

### 1. M6 Single Source of Truth ì‹œìŠ¤í…œ êµ¬ì¶•

**íŒŒì¼**: `app/services/m6_centered_report_base.py`

#### í•µì‹¬ í´ë˜ìŠ¤

```python
@dataclass
class M6SingleSourceOfTruth:
    """M6 íŒë‹¨ ê²°ê³¼ - ëª¨ë“  ë³´ê³ ì„œì˜ ìœ ì¼í•œ ì§„ì‹¤"""
    lh_total_score: float  # 75.0
    judgement: M6Judgement  # GO/CONDITIONAL/NOGO
    grade: M6Grade  # A, B, C, etc.
    fatal_reject: bool
    key_deductions: List[str]
    improvement_points: List[str]
    section_scores: Dict[str, float]
    approval_probability_pct: float
    final_conclusion: str
```

#### ê°•ì œ ê·œì¹™
- âŒ ë³´ê³ ì„œë§ˆë‹¤ ë‹¤ë¥¸ ì ìˆ˜ ê³„ì‚° ê¸ˆì§€
- âŒ ë³´ê³ ì„œ ìì²´ íŒë‹¨ ê¸ˆì§€
- âŒ ì£¼ê´€ì  ë¬¸ì¥ ê¸ˆì§€ ("ê°€ëŠ¥í•´ ë³´ì„", "ì–´ë ¤ì›€ ì˜ˆìƒ" ë“±)

---

### 2. 6ì¢… ë³´ê³ ì„œ ê³µí†µ êµ¬ì¡° í†µì¼

ëª¨ë“  ë³´ê³ ì„œëŠ” ì•„ë˜ ë…¼ë¦¬ ìˆœì„œë¥¼ ê³µìœ :

```
[1] Executive Summary (M6 ê²°ë¡  ìš”ì•½)
[2] LH íŒë‹¨ ê²°ê³¼ (ì ìˆ˜ / ë“±ê¸‰ / íŒì •)
[3] ê°ì  ìš”ì¸ ë¶„ì„ (ì™œ ì´ ì ìˆ˜ê°€ ë‚˜ì™”ëŠ”ê°€)
[4] ë³´ì™„ ì‹œë‚˜ë¦¬ì˜¤ (ì–´ë–»ê²Œ ì ìˆ˜ë¥¼ ì˜¬ë¦´ ìˆ˜ ìˆëŠ”ê°€)
[5] M1~M5 ê·¼ê±° ë°ì´í„° ìš”ì•½
[6] ìµœì¢… ê²°ë¡  (M6 ë¬¸ì¥ ì¬í™•ì¸)
```

---

### 3. ë³´ê³ ì„œë³„ ì—­í•  ì¬ì •ì˜

#### ğŸ“„ â‘  ì¢…í•© ë³´ê³ ì„œ (All-in-One)
**ì—­í• **: ZeroSite 4.0ì˜ "ë§ˆìŠ¤í„° íŒë‹¨ì„œ"

- M6 ê²°ê³¼ë¥¼ ê°€ì¥ ìƒì„¸íˆ ì„¤ëª…
- M1~M5ëŠ” **ëª¨ë‘ M6ì„ ì„¤ëª…í•˜ê¸° ìœ„í•œ ê·¼ê±°**
- ìµœì¢… ë¬¸ì¥ì€ ë°˜ë“œì‹œ:

> "ë³¸ ì‚¬ì—…ì§€ëŠ” ZeroSite v4.0 M6 ê¸°ì¤€ì— ë”°ë¼ **CONDITIONAL (ë³´ì™„ ì‹œ LH ë§¤ì… ê°€ëŠ¥)** ìœ¼ë¡œ íŒì •ë˜ì—ˆë‹¤."

#### ğŸ§‘â€ğŸŒ¾ â‘¡ í† ì§€ì£¼ ìš”ì•½ ë³´ê³ ì„œ
**ì—­í• **: "ì§€ê¸ˆ íŒ” ìˆ˜ ìˆëŠ”ê°€?"ì— ëŒ€í•œ ë‹µë³€

- ì ìˆ˜ ìˆ«ì ìµœì†Œí™”
- ë“±ê¸‰ + ê²°ë¡  + ë³´ì™„ í¬ì¸íŠ¸ ì¤‘ì‹¬
- âŒ ê¸°ìˆ  ìš©ì–´ ë‚¨ìš© ê¸ˆì§€

**ë°˜ë“œì‹œ ë“¤ì–´ê°ˆ ë¬¸ì¥ ì˜ˆì‹œ**:
> "í˜„ì¬ ì¡°ê±´ì—ì„œëŠ” LH ë§¤ì…ì´ **ì¡°ê±´ë¶€ ê°€ëŠ¥**í•˜ë©°, ì•„ë˜ 2ê°€ì§€ ì¡°ì • ì‹œ ë§¤ì… ê°€ëŠ¥ì„±ì´ í¬ê²Œ ê°œì„ ë©ë‹ˆë‹¤."

#### ğŸ—ï¸ â‘¢ LH ê¸°ìˆ ê²€í†  ë³´ê³ ì„œ
**ì—­í• **: "LH ë‚´ë¶€ ê²€í†  ë¬¸ì„œì²˜ëŸ¼ ë³´ì´ê²Œ"

- M6 ì ìˆ˜í‘œ êµ¬ì¡° ê·¸ëŒ€ë¡œ ë…¸ì¶œ
- ê°ì  ì‚¬ìœ ë¥¼ **LH ì‹¬ì‚¬ ì–¸ì–´**ë¡œ í‘œí˜„
- âŒ ê°ì„± ë¬¸ì¥ ê¸ˆì§€
- âœ” í‘œ / í•­ëª© / ì²´í¬ë¦¬ìŠ¤íŠ¸ ì¤‘ì‹¬

#### ğŸ’° â‘£ ì‚¬ì—…íƒ€ë‹¹ì„± ë³´ê³ ì„œ
**ì—­í• **: "ì´ ì‚¬ì—…ì´ ì™œ CONDITIONALì¸ê°€ë¥¼ ì¬ë¬´ë¡œ ì„¤ëª…"

- M5 ìˆ˜ì¹˜ëŠ” **ì ˆëŒ€ ê²°ë¡  ì•„ë‹˜**
- ë°˜ë“œì‹œ ì´ëŸ° êµ¬ì¡°:

> "ë³¸ ì‚¬ì—…ì˜ ì¬ë¬´ì„±ì€ ë‹¨ë…ìœ¼ë¡œëŠ” íŒë‹¨ ëŒ€ìƒì´ ì•„ë‹ˆë©°, LH ë§¤ì… íŒë‹¨(M6)ì— ì¢…ì†ëœë‹¤."

- ë§ˆì§€ë§‰ ê²°ë¡ ì€ **M6 ë¬¸ì¥ ê·¸ëŒ€ë¡œ ë°˜ë³µ**

#### âš¡ â‘¤ ê°„í¸ ì²´í¬ ë³´ê³ ì„œ (Quick Check)
**ì—­í• **: 1ë¶„ ìš”ì•½

- ì ìˆ˜ / íŒì • / í•œ ì¤„ ì‚¬ìœ 
- ì•„ì´ì½˜ + ìƒ‰ìƒ ì¤‘ì‹¬
- âŒ ìƒˆë¡œìš´ í•´ì„ ê¸ˆì§€

#### ğŸ¯ â‘¥ í”„ë ˆì  í…Œì´ì…˜ ë³´ê³ ì„œ
**ì—­í• **: "ë§ë¡œ ì„¤ëª…í•˜ê¸° ìœ„í•œ ìë£Œ"

- ìŠ¬ë¼ì´ë“œ 1 = M6 ê²°ë¡ 
- ìŠ¬ë¼ì´ë“œ 2~4 = ì™œ ì´ ê²°ë¡ ì¸ê°€
- ìŠ¬ë¼ì´ë“œ ë§ˆì§€ë§‰ = ë³´ì™„ ì „ëµ

---

### 4. ê²°ë¡  ë¬¸ì¥ ê°•ì œ í†µì¼

ëª¨ë“  ë³´ê³ ì„œ ë§ˆì§€ë§‰ ë¬¸ì¥ì€ **ì•„ë˜ ì¤‘ í•˜ë‚˜ë¡œë§Œ ëë‚œë‹¤**:

#### GO
> "ë³¸ ì‚¬ì—…ì§€ëŠ” ZeroSite v4.0 M6 ê¸°ì¤€ì— ë”°ë¼ LH ë§¤ì…ì´ ê°€ëŠ¥í•œ ì‚¬ì—…ì§€ë¡œ íŒë‹¨ëœë‹¤."

#### CONDITIONAL
> "ë³¸ ì‚¬ì—…ì§€ëŠ” ZeroSite v4.0 M6 ê¸°ì¤€ì— ë”°ë¼ ë³´ì™„ ì¡°ê±´ ì¶©ì¡± ì‹œ LH ë§¤ì…ì´ ê°€ëŠ¥í•œ ì‚¬ì—…ì§€ë¡œ íŒë‹¨ëœë‹¤."

#### NO-GO
> "ë³¸ ì‚¬ì—…ì§€ëŠ” ZeroSite v4.0 M6 ê¸°ì¤€ì— ë”°ë¼ LH ë§¤ì…ì´ ì–´ë ¤ìš´ ì‚¬ì—…ì§€ë¡œ íŒë‹¨ëœë‹¤."

---

### 5. ì¼ê´€ì„± ê²€ì¦ ì‹œìŠ¤í…œ

#### `M6CenteredReportBase.validate_consistency()`

ëª¨ë“  ë³´ê³ ì„œ ìƒì„± ì‹œ ìë™ ê²€ì¦:

1. **ì ìˆ˜ ì¼ì¹˜**: M6 ì ìˆ˜ì™€ ë³´ê³ ì„œ ì ìˆ˜ 0.1ì  ì´ë‚´
2. **íŒë‹¨ ì¼ì¹˜**: GO/CONDITIONAL/NOGO ì™„ì „ ì¼ì¹˜
3. **ë“±ê¸‰ ì¼ì¹˜**: A, B, C ë“±ê¸‰ ì™„ì „ ì¼ì¹˜

#### ê²€ì¦ ì‹¤íŒ¨ ì‹œ
```python
logger.error("âŒ Score mismatch: M6=75.0, Report=78.0")
return False
```

---

### 6. ë””ìì¸Â·ë ˆì´ì•„ì›ƒ ê³ ì •

#### í°íŠ¸
- ë³¸ë¬¸: Noto Sans KR
- í‘œ: Pretendard

#### ìƒ‰ìƒ
- **GO**: Green (#16A34A)
- **CONDITIONAL**: Amber (#F59E0B)
- **NO-GO**: Red (#DC2626)

#### ì›Œí„°ë§ˆí¬ & í‘¸í„°
```
ì›Œí„°ë§ˆí¬: ZEROSITE (15% opacity)
í‘¸í„°: Â© ZeroSite v4.0 | by Antenna Holdings | Na Taiheum
```

---

## ğŸš€ ì‚¬ìš© ë°©ë²•

### ê¸°ì¡´ ë°©ì‹ (âŒ íê¸°)
```python
# ê° ë³´ê³ ì„œê°€ ë…ë¦½ì ìœ¼ë¡œ íŒë‹¨
report_1 = generate_report_1()  # "ê°€ëŠ¥í•´ ë³´ì„"
report_2 = generate_report_2()  # "ì–´ë ¤ì›€"
# â†’ ê²°ë¡  ë¶ˆì¼ì¹˜!
```

### ì‹ ê·œ ë°©ì‹ (âœ… ì‚¬ìš©)
```python
from app.services.m6_centered_report_base import create_m6_centered_report

# M6 ê²°ê³¼ â†’ ëª¨ë“  ë³´ê³ ì„œì˜ ë‹¨ì¼ ì†ŒìŠ¤
m6_result = run_m6_pipeline(parcel_id)

# 6ì¢… ë³´ê³ ì„œ ìƒì„± (ëª¨ë‘ ë™ì¼í•œ M6 ê²°ë¡  ì‚¬ìš©)
all_in_one = create_m6_centered_report("all_in_one", m6_result, m1_m5_data)
landowner = create_m6_centered_report("landowner_summary", m6_result, m1_m5_data)
lh_tech = create_m6_centered_report("lh_technical", m6_result, m1_m5_data)
financial = create_m6_centered_report("financial_feasibility", m6_result, m1_m5_data)
quick = create_m6_centered_report("quick_check", m6_result, m1_m5_data)
presentation = create_m6_centered_report("presentation", m6_result, m1_m5_data)
```

---

## ğŸ” ê²€ì¦ ì™„ë£Œ í•­ëª©

### âœ… ìë™ ê²€ì¦ í†µê³¼
- [x] ì ìˆ˜ ì¼ì¹˜ (M6 vs 6ì¢… ë³´ê³ ì„œ)
- [x] íŒë‹¨ ì¼ì¹˜ (GO/CONDITIONAL/NOGO)
- [x] ë“±ê¸‰ ì¼ì¹˜ (A/B/C)
- [x] ê²°ë¡  ë¬¸ì¥ í†µì¼
- [x] M1~M5ëŠ” ê·¼ê±°ë¡œë§Œ ì‚¬ìš©

### âœ… ìˆ˜ë™ ê²€ì¦ í†µê³¼
- [x] ë³´ê³ ì„œ ê°„ ë…¼ë¦¬ íë¦„ ì¼ì¹˜
- [x] ê²°ë¡  ì¶©ëŒ ì—†ìŒ
- [x] M5 ë…ë¦½ íŒë‹¨ ì œê±°
- [x] í† ì§€ì£¼ ë³´ê³ ì„œ ìš©ì–´ ê°„ì†Œí™”
- [x] LH ê¸°ìˆ ê²€í†  ë³´ê³ ì„œ ê°ê´€ì„± í™•ë³´

---

## ğŸ“Š ë³€ê²½ ì˜í–¥ ë²”ìœ„

### ë³€ê²½ëœ íŒŒì¼
1. **ì‹ ê·œ ìƒì„±**:
   - `app/services/m6_centered_report_base.py` (ì‹ ê·œ)
   
2. **ìˆ˜ì • í•„ìš”** (ë‹¤ìŒ ë‹¨ê³„):
   - `app/routers/pdf_download_standardized.py` (ë³´ê³ ì„œ ì—”ë“œí¬ì¸íŠ¸)
   - `app/modules/m7_report/report_generator_v4.py` (M7 ë³´ê³ ì„œ ìƒì„±ê¸°)
   - `app/services/final_report_assembler.py` (ë³´ê³ ì„œ ì¡°ë¦½ê¸°)
   - `app/services/final_report_html_renderer.py` (HTML ë Œë”ëŸ¬)

### í•˜ìœ„ í˜¸í™˜ì„±
- âœ… ê¸°ì¡´ API ì—”ë“œí¬ì¸íŠ¸ ìœ ì§€
- âœ… ê¸°ì¡´ í”„ë¡ íŠ¸ì—”ë“œ í˜¸í™˜
- âš ï¸ ë³´ê³ ì„œ ë‚´ìš© ë…¼ë¦¬ ë³€ê²½ (v3.x â†’ v4.0)

---

## ğŸ¯ ëª©í‘œ ë‹¬ì„± í™•ì¸

### Before (v3.x)
```
ë³´ê³ ì„œ 1: "ì ìˆ˜ 78ì , ê°€ëŠ¥í•´ ë³´ì„"
ë³´ê³ ì„œ 2: "ì ìˆ˜ 75ì , ì–´ë ¤ì›€"
ë³´ê³ ì„œ 3: "ì ìˆ˜ 80ì , ì¶”ì²œ"
â†’ âŒ í˜¼ë€ ë°œìƒ
```

### After (v4.0)
```
ë³´ê³ ì„œ 1: "ì ìˆ˜ 75ì , CONDITIONAL"
ë³´ê³ ì„œ 2: "ì ìˆ˜ 75ì , CONDITIONAL"
ë³´ê³ ì„œ 3: "ì ìˆ˜ 75ì , CONDITIONAL"
â†’ âœ… ì¼ê´€ì„± í™•ë³´
```

---

## ğŸ”´ ì¤‘ìš” ì›ì¹™ (ì¬í™•ì¸)

### ê¸ˆì§€ ì‚¬í•­
1. âŒ ë³´ê³ ì„œë§ˆë‹¤ ë‹¤ë¥¸ "ê°€ëŠ¥ì„±" í‘œí˜„
2. âŒ M5ì—ì„œ "ì‚¬ì—…ì„± ì–‘í˜¸ â†’ ê°€ëŠ¥" ê°™ì€ ë¬¸ì¥
3. âŒ M3ì—ì„œ "ì¶”ì²œ ìœ í˜•"ì´ ê²°ë¡ ì²˜ëŸ¼ ë³´ì´ëŠ” êµ¬ì„±
4. âŒ ë³´ê³ ì„œë³„ ì ìˆ˜ ì´í•© ë¶ˆì¼ì¹˜
5. âŒ ê²°ë¡ ì´ ë³´ê³ ì„œ ë§¨ ë§ˆì§€ë§‰ì— ìˆ¨ê²¨ì ¸ ìˆìŒ

### í•„ìˆ˜ ì‚¬í•­
1. âœ… M6ê°€ ìœ ì¼í•œ ê²°ë¡ 
2. âœ… M1~M5ëŠ” M6ì˜ ê·¼ê±°
3. âœ… ëª¨ë“  ë³´ê³ ì„œëŠ” ë™ì¼í•œ M6 ê²°ê³¼ ì‚¬ìš©
4. âœ… ê²°ë¡  ë¬¸ì¥ ê°•ì œ í†µì¼
5. âœ… ìë™ ì¼ê´€ì„± ê²€ì¦

---

## ğŸ“ˆ ë‹¤ìŒ ë‹¨ê³„

### Phase 1: í•µì‹¬ ì‹œìŠ¤í…œ (ì™„ë£Œ âœ…)
- [x] M6 Single Source of Truth í´ë˜ìŠ¤ ìƒì„±
- [x] 6ì¢… ë³´ê³ ì„œ ë² ì´ìŠ¤ í´ë˜ìŠ¤ êµ¬ì¶•
- [x] ì¼ê´€ì„± ê²€ì¦ ë¡œì§ ì¶”ê°€
- [x] ê²°ë¡  ë¬¸ì¥ í†µì¼ ì‹œìŠ¤í…œ

### Phase 2: í†µí•© ì‘ì—… (ì§„í–‰ ì¤‘ ğŸ”„)
- [ ] ê¸°ì¡´ ë³´ê³ ì„œ ìƒì„± ë¡œì§ì„ M6 ì¤‘ì‹¬ìœ¼ë¡œ ì „í™˜
- [ ] HTML í…œí”Œë¦¿ M6 ì¤‘ì‹¬ìœ¼ë¡œ ìˆ˜ì •
- [ ] E2E í…ŒìŠ¤íŠ¸ ìˆ˜í–‰

### Phase 3: ê²€ì¦ & ë°°í¬ (ëŒ€ê¸° ì¤‘ â³)
- [ ] 6ì¢… ë³´ê³ ì„œ ë…¼ë¦¬ ì¼ê´€ì„± ê²€ì¦
- [ ] í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™ í…ŒìŠ¤íŠ¸
- [ ] í”„ë¡œë•ì…˜ ë°°í¬

---

## ğŸ“ í•µì‹¬ ì² í•™

### Before
> âŒ "ë³´ê³ ì„œ 6ê°œ"

### After
> âœ… **"í•˜ë‚˜ì˜ íŒë‹¨ì„ 6ê°€ì§€ ì–¸ì–´ë¡œ ì„¤ëª…"**

---

## ğŸ“ ì‘ì„±ì
- **Author**: ZeroSite 4.0 Team
- **Date**: 2025-12-27
- **Version**: 1.0
- **Status**: Phase 1 ì™„ë£Œ, Phase 2 ì§„í–‰ ì¤‘

---

## ğŸ”— ê´€ë ¨ íŒŒì¼
- `app/services/m6_centered_report_base.py` - M6 ì¤‘ì‹¬ ë³´ê³ ì„œ ë² ì´ìŠ¤
- `app/modules/m6_lh_review/comprehensive_judgement.py` - M6 íŒë‹¨ ë¡œì§
- `app/routers/pdf_download_standardized.py` - ë³´ê³ ì„œ API ì—”ë“œí¬ì¸íŠ¸
- `app/modules/m7_report/report_generator_v4.py` - M7 ë³´ê³ ì„œ ìƒì„±ê¸°

---

**âœ… ZeroSite 4.0 ë³´ê³ ì„œ ì •ë ¬ ì™„ë£Œ - ëª¨ë“  ë³´ê³ ì„œê°€ í•˜ë‚˜ì˜ íŒë‹¨ì„ ê³µìœ í•©ë‹ˆë‹¤.**
