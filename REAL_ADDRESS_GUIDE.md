# 🏡 실제 주소 분석 페이지 - 완전 가이드

**생성일**: 2026-01-01  
**버전**: v1.6.0  
**페이지**: `/analyze`  
**상태**: ✅ Production Ready

---

## 📋 개요

이제 **테스트 데이터가 아닌 실제 주소**를 입력하여 새로운 토지 분석을 생성할 수 있습니다!

### 주요 기능
- ✅ 실제 주소 검색 (도로명/지번)
- ✅ 8-STEP 실시간 분석
- ✅ 자동 데이터 수집
- ✅ 즉시 대시보드 연결
- ✅ 6개 보고서 자동 생성

---

## 🌐 접속 URL

### 실제 주소 분석 페이지
```
https://8000-ivaebkgzir7elqapbc68q-8f57ffe2.sandbox.novita.ai/analyze
```

### 랜딩 페이지에서 접근
```
https://8000-ivaebkgzir7elqapbc68q-8f57ffe2.sandbox.novita.ai/
→ "🏡 실제 주소로 새 분석 시작하기" 버튼 클릭
```

---

## 📝 사용 방법

### Step 1: 주소 입력
1. `/analyze` 페이지 접속
2. 주소 입력창에 **최소 3글자 이상** 입력

**입력 예시:**
```
✅ 도로명 주소: 서울시 강남구 테헤란로 123
✅ 지번 주소: 서울시 강남구 역삼동 123-45
✅ 부분 주소: 서울시 강남구 테헤란로
✅ 간단 주소: 강남구 테헤란로
```

3. "🔍 주소 검색" 버튼 클릭 또는 Enter

---

### Step 2: 주소 선택
검색 결과에서 원하는 주소 클릭

**표시 정보:**
- 🏠 도로명 주소
- 📍 지번 주소
- 좌표 정보 (자동)

**예시 결과:**
```
🏠 서울특별시 강남구 테헤란로 123
📍 서울특별시 강남구 역삼동 123-45
```

---

### Step 3: 자동 분석 시작
주소 선택 즉시 **8-STEP 분석** 자동 시작

**진행 단계:**
1. ✅ 주소 확인 - 입력 주소 검증
2. ✅ 위치 정보 - 좌표 및 행정구역
3. ✅ 토지 데이터 - 필지, 면적, PNU
4. ✅ 용도 정보 - 용도지역, 법적 제한
5. ✅ 분석 완료 - Context ID 생성

**소요 시간:** 약 10~30초

---

### Step 4: 결과 확인
분석 완료 후 자동으로 결과 표시

**표시 정보:**
- Context ID (RUN_ID)
- 주소
- 면적 (㎡)
- 용도지역
- PNU (필지고유번호)

**예시:**
```
Context ID: RUN_20260101_ABC123
주소: 서울시 강남구 테헤란로 123
면적: 500 ㎡
용도지역: 제2종일반주거지역
PNU: 1168010100
```

---

### Step 5: 대시보드 이동
"📊 대시보드에서 6개 보고서 보기" 버튼 클릭

**자동 이동:**
```
/dashboard?user=admin@zerosite.com&run_id=RUN_20260101_ABC123
```

**확인 가능한 보고서:**
- A. Master (종합 최종)
- B. Landowner (지주 제출용)
- C. LH Technical (LH 기술검토)
- D. Market Analysis (시장분석)
- E. LH Submission (LH 제출용)
- F. Investor (투자자용)

---

## 🔧 기술 구현

### API 엔드포인트

#### 1. 주소 검색
```http
POST /api/m1/address/search
Content-Type: application/json

{
  "query": "서울시 강남구 테헤란로"
}

Response:
{
  "suggestions": [
    {
      "road_address": "서울특별시 강남구 테헤란로 123",
      "jibun_address": "서울특별시 강남구 역삼동 123-45",
      "coordinates": {"lat": 37.5, "lon": 127.0},
      "sido": "서울특별시",
      "sigungu": "강남구",
      "dong": "역삼동"
    }
  ],
  "success": true,
  "using_mock_data": false
}
```

#### 2. 전체 데이터 수집
```http
POST /api/m1/collect-all
Content-Type: application/json

{
  "address": "서울특별시 강남구 테헤란로 123",
  "coordinates": {"lat": 37.5, "lon": 127.0}
}

Response:
{
  "context_id": "RUN_20260101_ABC123",
  "status": "success",
  "bundle": {
    "address": "서울시 강남구 테헤란로 123",
    "land_area": 500.0,
    "zone": "제2종일반주거지역",
    "pnu": "1168010100"
  }
}
```

---

### Frontend Flow

```javascript
// 1. 주소 검색
searchAddress() {
  POST /api/m1/address/search
  → Display suggestions
}

// 2. 주소 선택
selectAddress(addressData) {
  → Start analysis
}

// 3. 분석 실행
startAnalysis(addressData) {
  POST /api/m1/collect-all
  → Update progress steps
  → Display result
}

// 4. 대시보드 이동
openDashboard(contextId) {
  window.open(`/dashboard?run_id=${contextId}`)
}
```

---

## 🧪 테스트 시나리오

### Scenario 1: 성공 케이스
1. 접속: `/analyze`
2. 입력: "서울시 강남구 테헤란로"
3. 검색 결과: 3~5개 주소 표시
4. 선택: 첫 번째 주소 클릭
5. 분석: 5단계 진행 (약 20초)
6. 결과: Context ID 및 토지 정보 표시
7. 대시보드: 6개 보고서 확인

**예상 결과**: ✅ 모든 단계 성공

---

### Scenario 2: 검색 결과 없음
1. 입력: "존재하지않는주소123"
2. 검색 결과: 빈 결과
3. 오류 메시지: "검색 결과가 없습니다"

**예상 결과**: ✅ 적절한 오류 안내

---

### Scenario 3: 짧은 검색어
1. 입력: "서울" (3글자 미만 불가)
2. 경고: "주소를 최소 3글자 이상 입력하세요"

**예상 결과**: ✅ 입력 제한 작동

---

## 🆚 테스트 페이지 vs 실제 분석 페이지

### 테스트 페이지 (/)
- **목적**: 기존 분석 조회
- **데이터**: TEST_6REPORT + 4개 샘플
- **검색**: Database + DEV 테스트 데이터
- **용도**: 빠른 테스트, 데모

### 실제 분석 페이지 (/analyze) ⭐
- **목적**: 새 분석 생성
- **데이터**: 실제 주소 입력
- **검색**: 실시간 주소 API
- **용도**: 실전 사용, 프로덕션

---

## 📊 8-STEP 분석 프로세스

### STEP 1: 주소 확인
- 도로명/지번 주소 검증
- 다중 결과 제공
- 사용자 선택

### STEP 2: 위치 정보
- Geocoding (좌표 변환)
- 행정구역 확인
- 법정동 매핑

### STEP 3: 토지 데이터
- 필지 정보 수집
- 면적 확인
- PNU 생성

### STEP 4: 용도 정보
- 용도지역 조회
- 법적 제한사항
- 건축 제한

### STEP 5: 분석 완료
- Context ID 생성
- 데이터 저장 (Redis + DB)
- M4 파이프라인 연결

---

## 💡 사용 팁

### 1. 정확한 주소 입력
```
✅ 좋은 예: 서울시 강남구 테헤란로 123
❌ 나쁜 예: 강남
```

### 2. 검색 결과 확인
- 도로명과 지번 주소 모두 확인
- 정확한 위치 선택

### 3. 분석 대기
- 진행 단계 확인
- 약 10~30초 소요
- 중간에 창 닫지 않기

### 4. 대시보드 활용
- Context ID 저장
- 6개 보고서 모두 확인
- HTML/PDF 다운로드

---

## 🐛 문제 해결

### 검색 결과가 없어요
- 전체 주소 입력 (시/군/구 포함)
- 도로명 또는 지번 주소 시도
- 철자 확인

### 분석이 실패해요
- 인터넷 연결 확인
- 주소 형식 확인
- 브라우저 콘솔 (F12) 확인

### 대시보드가 안 열려요
- Context ID 확인
- 팝업 차단 해제
- 직접 URL 입력

---

## 📈 다음 단계

분석 완료 후:

1. **대시보드에서 보고서 확인**
   - A~F 6개 보고서
   - HTML 보기
   - PDF 다운로드

2. **외부 공유**
   - B/D/F 보고서 공유 링크 생성
   - 만료 시간 설정
   - 토큰 관리

3. **접근 로그 확인** (ADMIN)
   - 다운로드 횟수
   - 사용 통계
   - 활동 기록

---

## 🎯 핵심 특징

### 실시간 데이터 수집
- 외부 API 연동
- 최신 정보 제공
- 자동 업데이트

### 진행 상태 시각화
- 5단계 프로그레스바
- 현재 진행 상태 표시
- 완료 단계 체크

### 즉시 대시보드 연결
- 분석 완료 즉시 이동
- Context ID 자동 전달
- 6개 보고서 즉시 확인

---

## 📞 문의 및 피드백

문제가 발생하면:

1. 브라우저 개발자 도구 (F12) 확인
2. 네트워크 탭에서 API 응답 확인
3. 콘솔 로그 확인
4. 스크린샷 공유

---

## ✅ 체크리스트

- [ ] `/analyze` 페이지 접속
- [ ] 주소 입력 (3글자 이상)
- [ ] 검색 결과 확인
- [ ] 주소 선택
- [ ] 5단계 진행 확인
- [ ] 분석 결과 표시
- [ ] Context ID 확인
- [ ] 대시보드 이동
- [ ] 6개 보고서 확인

---

**상태**: ✅ Production Ready  
**업데이트**: 2026-01-01  
**커밋**: 242935d - feat: Add real address analysis page

---

## 🎉 이제 진짜 주소로 테스트하세요!

```
접속: https://8000-ivaebkgzir7elqapbc68q-8f57ffe2.sandbox.novita.ai/analyze

입력 예시:
- 서울시 강남구 테헤란로 123
- 서울시 서초구 반포대로 58
- 경기도 성남시 분당구 판교역로 235
```

**모든 기능이 실제 데이터로 작동합니다!** 🚀
