# 정부 공공데이터 API 재신청 가이드

## 🔍 현재 상황

### API 상태 점검 결과
- ✅ **카카오 API**: 정상 작동
- ❌ **인구통계 API** (`HousePopulationInformationService`): 500 에러
- ❌ **토지이용규제 API** (`LandInfoService`): 500 에러

**에러 메시지**: `unexpected errors`

---

## 💡 실패 원인

정부 공공데이터 API가 **"unexpected errors"**를 반환하는 주요 원인:

1. **API 서비스 활용 신청이 안되어 있음**
   - API 키는 발급되었지만, 각 서비스에 대한 **개별 활용 신청 및 승인**이 필요
   - 공공데이터포털은 **서비스별로** 별도 신청/승인 과정 필요

2. **API 키 상태 문제**
   - 키가 비활성화되었거나
   - 승인이 취소되었거나
   - 유효기간이 만료됨

---

## 🛠️ 해결 방법: API 재신청

### **Step 1: 공공데이터포털 접속**

1. 브라우저에서 https://www.data.go.kr 접속
2. 우측 상단 **로그인**

---

### **Step 2: 현재 활용 신청 상태 확인**

1. 로그인 후 우측 상단 **마이페이지** 클릭
2. 좌측 메뉴에서 **오픈API** → **개발계정** 클릭
3. **개발계정 상세** 페이지에서 다음 확인:
   ```
   서비스 키: 702ee131547fa817de152355d87249805da836374a7ffefee1c511897353807d
   ```
4. 아래 **"활용 API 목록"** 섹션 확인
   - `HousePopulationInformationService` 상태 확인
   - `LandInfoService` 상태 확인

**확인할 상태**:
- ✅ **활용신청 완료**: 정상 (그런데 에러 발생 중)
- ⏳ **승인 대기**: 승인 대기 중
- ❌ **없음**: 신청 안됨 (재신청 필요)

---

### **Step 3: 필요한 API 재신청**

#### **3-1. 인구통계 API 신청**

1. 공공데이터포털 검색창에 **"주택 인구통계"** 검색
2. 또는 직접 URL 접속:
   ```
   https://www.data.go.kr/data/15099144/openapi.do
   ```
3. **"활용신청"** 버튼 클릭
4. 신청 화면에서:
   - **활용 목적**: `LH 신축매입임대 토지 진단 시스템 개발`
   - **상세 설명**: `신축매입임대주택 사업 대상 토지 분석을 위한 인구통계 데이터 활용`
5. **"신청하기"** 클릭

#### **3-2. 토지이용규제 API 신청**

1. 검색창에 **"토지이용규제정보"** 검색
2. 또는 직접 URL:
   ```
   https://www.data.go.kr/data/15012890/openapi.do
   ```
3. **"활용신청"** 버튼 클릭
4. 신청 화면에서:
   - **활용 목적**: `LH 신축매입임대 토지 진단 시스템 개발`
   - **상세 설명**: `용도지역 및 토지규제 정보 조회를 위한 데이터 활용`
5. **"신청하기"** 클릭

---

### **Step 4: 승인 대기**

- **승인 소요 시간**: 보통 **즉시~1일** (기관에 따라 다름)
- **승인 알림**: 이메일 또는 마이페이지에서 확인 가능

---

### **Step 5: 승인 후 확인**

승인되면 **자동으로 API 사용 가능**합니다.

#### 테스트 방법:

```bash
# 인구통계 API 테스트
curl "http://apis.data.go.kr/1741000/HousePopulationInformationService/getPopulationByAge?serviceKey=702ee131547fa817de152355d87249805da836374a7ffefee1c511897353807d&admCode=11680&numOfRows=10&pageNo=1"

# 토지이용규제 API 테스트
curl "http://apis.data.go.kr/1613000/LandInfoService/getZoneLandInfo?serviceKey=702ee131547fa817de152355d87249805da836374a7ffefee1c511897353807d&numOfRows=10&pageNo=1"
```

**정상 응답이 오면**: 시스템이 자동으로 정확한 인구통계 데이터를 사용합니다!

---

## 📊 현재 시스템 상태 (재신청 전후 비교)

### **재신청 전 (현재)**

| 데이터 | 출처 | 정확도 |
|:---|:---|:---:|
| 인구통계 | 카카오 주변 시설 밀집도 추정 | 70% |
| 시장 규모 | 카카오 주변 시설 밀집도 추정 | 65% |
| 접근성 | 카카오 API | 95% |
| 용도지역 | 사용자 입력 | 100% |

**수요 점수**: 카카오 보정으로 **50~70점** 수준

---

### **재신청 후 (예상)**

| 데이터 | 출처 | 정확도 |
|:---|:---|:---:|
| 인구통계 | 정부 API (실제 통계청 데이터) | 100% |
| 시장 규모 | 정부 API + 카카오 보정 | 95% |
| 접근성 | 카카오 API | 95% |
| 용도지역 | 정부 API + 사용자 입력 | 100% |

**수요 점수**: 실제 데이터 기반 **70~85점** 수준

---

## 🚀 즉시 사용 가능한 기능

**재신청 승인 전에도** 시스템은 정상 작동합니다:

### ✅ 작동하는 기능
- 주소 → 좌표 변환 (카카오)
- 주변 시설 검색 (카카오)
- 유해시설 검색 (카카오)
- 접근성 분석 (카카오)
- **카카오 주변 시설 기반 수요 보정** ← NEW!
- 건축 규모 산정
- 가격 추정
- 보고서 생성

### ⚡ 개선된 기능
- **수요 분석**: 카카오 주변 시설 밀집도로 인구통계 및 시장 규모 추정
- **정확도**: 기존 31.5점 → 50~70점으로 대폭 향상

---

## 📞 문의

API 재신청 관련 문의:
- **공공데이터포털 고객센터**: 1577-2160
- **이메일**: info@data.go.kr
- **운영시간**: 평일 09:00~18:00

---

## 📝 정리

1. ✅ **지금 당장**: 카카오 기반 수요 분석으로 **정상 작동**
2. ⏳ **1~2일 후**: 정부 API 승인되면 **정확도 향상**
3. 🎯 **최종 상태**: 카카오 + 정부 API 융합으로 **최고 정확도**

**현재 시스템은 정부 API 없이도 충분히 사용 가능합니다!**
