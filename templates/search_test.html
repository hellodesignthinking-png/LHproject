<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ê²€ìƒ‰ í…ŒìŠ¤íŠ¸</title>
    <style>
        body { font-family: sans-serif; padding: 40px; max-width: 800px; margin: 0 auto; }
        button { padding: 10px 20px; margin: 10px 0; }
        pre { background: #f5f5f5; padding: 15px; overflow: auto; }
        .result { margin: 20px 0; padding: 15px; border: 1px solid #ddd; }
    </style>
</head>
<body>
    <h1>ğŸ” ê²€ìƒ‰ API í…ŒìŠ¤íŠ¸</h1>
    
    <div>
        <input type="text" id="searchInput" placeholder="ê²€ìƒ‰ì–´ ì…ë ¥ (ì˜ˆ: ì„œìš¸)" style="width: 300px; padding: 10px;">
        <button onclick="testSearch()">ê²€ìƒ‰</button>
    </div>
    
    <div id="output"></div>
    
    <script>
        async function testSearch() {
            const query = document.getElementById('searchInput').value.trim() || 'ì„œìš¸';
            const output = document.getElementById('output');
            
            output.innerHTML = '<p>ğŸ” ê²€ìƒ‰ ì¤‘...</p>';
            
            try {
                const url = `/api/v4/run-ids/search?q=${encodeURIComponent(query)}`;
                
                console.log('Request URL:', url);
                output.innerHTML += `<p><strong>Request URL:</strong> ${url}</p>`;
                
                const response = await fetch(url, {
                    headers: {
                        'X-User-Email': 'admin@zerosite.com',
                        'Content-Type': 'application/json'
                    }
                });
                
                console.log('Response status:', response.status);
                output.innerHTML += `<p><strong>Response status:</strong> ${response.status}</p>`;
                
                const data = await response.json();
                console.log('Response data:', data);
                
                output.innerHTML += `<p><strong>Response:</strong></p><pre>${JSON.stringify(data, null, 2)}</pre>`;
                
                if (data.run_ids && data.run_ids.length > 0) {
                    output.innerHTML += '<h3>ê²€ìƒ‰ ê²°ê³¼:</h3>';
                    data.run_ids.forEach(item => {
                        output.innerHTML += `
                            <div class="result">
                                <strong>${item.run_id}</strong><br>
                                ${item.address || 'N/A'}<br>
                                ë©´ì : ${item.land_area}ã¡ | ìš©ë„: ${item.zone || 'N/A'}
                            </div>
                        `;
                    });
                } else {
                    output.innerHTML += '<p>âŒ ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ</p>';
                }
                
            } catch (error) {
                console.error('Error:', error);
                output.innerHTML += `<p style="color: red;"><strong>Error:</strong> ${error.message}</p>`;
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ê²€ìƒ‰
        window.addEventListener('DOMContentLoaded', () => {
            testSearch();
        });
    </script>
</body>
</html>
