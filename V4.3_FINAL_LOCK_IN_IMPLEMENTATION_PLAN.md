# ZeroSite v4.3 FINAL LOCK-IN - ìƒì„¸ êµ¬í˜„ ê³„íšì„œ

**ì‘ì„±ì¼**: 2025-12-22  
**ë²„ì „**: v4.3 FINAL LOCK-IN  
**ëª©ì **: ì œí’ˆ ì™„ì„±ë„ 100% ë‹¬ì„± - "ì„¤ëª…ì´ í•„ìš” ì—†ëŠ” ì œí’ˆ" êµ¬í˜„  

---

## ğŸ¯ Executive Summary

### v4.3ì˜ ì •ì˜

> **v4.3ì€ ê¸°ëŠ¥ ì¶”ê°€ ë²„ì „ì´ ì•„ë‹ˆë¼,  
> ZeroSiteë¥¼ 'ì™„ì„±ëœ ì œí’ˆ'ìœ¼ë¡œ ì ê·¸ëŠ”(Lock-in) ìµœì¢… ë²„ì „ì´ë‹¤.**

### í•µì‹¬ ëª©í‘œ

v4.2ëŠ” **"ì½˜í…ì¸  ì™„ì„±"**ì„ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤.  
v4.3ì€ **"ì‹œìŠ¤í…œ ì™„ì„±"**ì„ ë‹¬ì„±í•©ë‹ˆë‹¤.

**ì°¨ì´ì **:
- v4.2: ëª¨ë“  ë³´ê³ ì„œê°€ 50í˜ì´ì§€ ì´ìƒ, ë¦¬ìŠ¤í¬/ì‹œë‚˜ë¦¬ì˜¤ ë¶„ì„ ì™„ë£Œ
- v4.3: ëª¨ë“  ë°ì´í„° ì†ŒìŠ¤ í†µí•©, ê·œì¹™ ì½”ë“œí™”, ì¼ê´€ì„± 100% ë³´ì¥

---

## ğŸ“‹ ì‘ì—… ê°œìš”

| Task | ìš°ì„ ìˆœìœ„ | ì˜ˆìƒ ì‹œê°„ | ë‚œì´ë„ | ì˜í–¥ë„ |
|------|----------|-----------|--------|--------|
| 1. ë¶„ì„í™”ë©´ â†” ìµœì¢…ë³´ê³ ì„œ í†µí•© | ìµœìš°ì„  | 3-4ì‹œê°„ | ë†’ìŒ | ë§¤ìš° ë†’ìŒ |
| 2. ë¦¬ìŠ¤í¬ ë§ˆìŠ¤í„° ì‹œìŠ¤í…œí™” | ìµœìš°ì„  | 2-3ì‹œê°„ | ì¤‘ê°„ | ë†’ìŒ |
| 3. ê²°ë¡  ì¹´ë“œ í‘œì¤€í™” | ë†’ìŒ | 1-2ì‹œê°„ | ë‚®ìŒ | ì¤‘ê°„ |
| 4. í˜ì´ì§€ ë°€ë„ ì •ê·œí™” | ì¤‘ê°„ | 2-3ì‹œê°„ | ì¤‘ê°„ | ì¤‘ê°„ |
| 5. í™ˆí˜ì´ì§€ ë§¤í•‘ ë¬¸ì„œ | ë‚®ìŒ | 1ì‹œê°„ | ë‚®ìŒ | ë‚®ìŒ |

**ì´ ì˜ˆìƒ ì‹œê°„**: 9-13ì‹œê°„

---

## ğŸ“ ì½”ë“œë² ì´ìŠ¤ êµ¬ì¡° ë¶„ì„

### í•µì‹¬ íŒŒì¼ ìœ„ì¹˜

```
app/
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ final_report_assembler.py         # í•µì‹¬: ë³´ê³ ì„œ ë°ì´í„° ì¡°ë¦½
â”‚   â”œâ”€â”€ final_report_html_renderer.py     # í•µì‹¬: HTML/PDF ë Œë”ë§ (5,276 lines)
â”‚   â””â”€â”€ lh_analysis_canonical.py          # M2-M6 canonical summary ìƒì„±
â”œâ”€â”€ api/endpoints/
â”‚   â”œâ”€â”€ reports_v3.py                     # ìµœì¢… ë³´ê³ ì„œ API ì—”ë“œí¬ì¸íŠ¸
â”‚   â”œâ”€â”€ pipeline_reports_v4.py            # íŒŒì´í”„ë¼ì¸ ë³´ê³ ì„œ
â”‚   â””â”€â”€ analysis_v9_1_REAL.py             # ë¶„ì„ í™”ë©´ API
â””â”€â”€ models/
    â”œâ”€â”€ final_report_data_contract.py     # ë³´ê³ ì„œ ë°ì´í„° ê³„ì•½
    â””â”€â”€ final_report_types.py             # ë³´ê³ ì„œ íƒ€ì… ì •ì˜
```

### ë°ì´í„° íë¦„ (í˜„ì¬)

```
ì‚¬ìš©ì ì…ë ¥ (ì£¼ì†Œ)
    â†“
M1-M6 ëª¨ë“ˆ ì‹¤í–‰
    â†“
canonical_summary ìƒì„± (lh_analysis_canonical.py)
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ë¶„ì„í™”ë©´ HTML           â”‚ ìµœì¢…ë³´ê³ ì„œ                â”‚
â”‚ (summary-only)          â”‚ (assembler + renderer)   â”‚
â”‚ âŒ ë…ë¦½ ë¡œì§             â”‚ âœ… ì™„ì „í•œ ë°ì´í„°          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â¬†ï¸ ë¬¸ì œ: ë°ì´í„° ì†ŒìŠ¤ê°€ ë‹¤ë¦„
```

### ë°ì´í„° íë¦„ (v4.3 ëª©í‘œ)

```
ì‚¬ìš©ì ì…ë ¥ (ì£¼ì†Œ)
    â†“
M1-M6 ëª¨ë“ˆ ì‹¤í–‰
    â†“
canonical_summary ìƒì„±
    â†“
final_report_assembler (Single Source of Truth)
    â†“
final_report_html_renderer
    â”œâ”€â”€ is_preview=True  â†’ ë¶„ì„í™”ë©´ HTML (ìš”ì•½ë³¸)
    â””â”€â”€ is_preview=False â†’ ìµœì¢…ë³´ê³ ì„œ (ì™„ì „íŒ)
                 â¬†ï¸ í•´ê²°: ë‹¨ì¼ ë°ì´í„° ì†ŒìŠ¤
```

---

## ğŸ”§ Task 1: ë¶„ì„í™”ë©´ â†” ìµœì¢…ë³´ê³ ì„œ ë°ì´í„° í†µí•©

### 1.1 ë¬¸ì œ ì •ì˜

**í˜„ì¬ ìƒí™©**:
- ë¶„ì„í™”ë©´ HTML: `summary-only` ë°ì´í„° ì‚¬ìš©
- ìµœì¢…ë³´ê³ ì„œ: `canonical_summary + expanded narrative` ì‚¬ìš©
- ê²°ê³¼: ì‚¬ìš©ìê°€ "ë¶„ì„í™”ë©´ê³¼ ë³´ê³ ì„œ ë‚´ìš©ì´ ì™œ ë‹¤ë¥¸ê°€?" ì§ˆë¬¸

**ëª©í‘œ**:
- ë¶„ì„í™”ë©´ HTML = ìµœì¢…ë³´ê³ ì„œ ìš”ì•½ë³¸
- ë°ì´í„°, ìˆ˜ì¹˜, ê²°ë¡ , ë¦¬ìŠ¤í¬ 100% ë™ì¼

### 1.2 êµ¬í˜„ ê³„íš

#### Step 1.1: `final_report_assembler.py` ìˆ˜ì •

**íŒŒì¼ ìœ„ì¹˜**: `app/services/final_report_assembler.py`

**ìˆ˜ì • ë‚´ìš©**:

```python
# 1. í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ì— is_preview í”Œë˜ê·¸ ì¶”ê°€

def assemble_all_in_one_report(
    context_id: str, 
    canonical_summary: Dict[str, Any],
    is_preview: bool = False  # â† ì¶”ê°€
) -> Dict[str, Any]:
    """
    All-in-One ë³´ê³ ì„œ ì¡°ë¦½
    
    Args:
        context_id: ì»¨í…ìŠ¤íŠ¸ ID
        canonical_summary: M2-M6 canonical summary
        is_preview: Trueì¼ ê²½ìš° ìš”ì•½ë³¸ ìƒì„± (ë¶„ì„í™”ë©´ìš©)
    """
    # ê¸°ì¡´ ë¡œì§ ìœ ì§€
    report_data = {...}
    
    # is_preview=Trueì¼ ë•Œ ì¶•ì•½ ì²˜ë¦¬
    if is_preview:
        # ì„¹ì…˜ë³„ ìƒìœ„ 3ê°œ í•­ëª©ë§Œ í¬í•¨
        report_data = _apply_preview_truncation(report_data)
    
    return report_data


def _apply_preview_truncation(data: Dict[str, Any]) -> Dict[str, Any]:
    """
    Previewìš© ë°ì´í„° ì¶•ì•½
    
    ê·œì¹™:
    - ë¦¬ìŠ¤íŠ¸ëŠ” ìƒìœ„ 3ê°œë§Œ
    - ê¸´ í…ìŠ¤íŠ¸ëŠ” 200ì ì œí•œ
    - ë°ì´í„° êµ¬ì¡°ì™€ í•„ë“œëª…ì€ ê·¸ëŒ€ë¡œ ìœ ì§€
    """
    truncated = data.copy()
    
    # ì˜ˆì‹œ: approval_barriers ë¦¬ìŠ¤íŠ¸ ì¶•ì•½
    if 'approval_barriers' in truncated and isinstance(truncated['approval_barriers'], list):
        truncated['approval_barriers'] = truncated['approval_barriers'][:3]
    
    # ì˜ˆì‹œ: policy_context í…ìŠ¤íŠ¸ ì¶•ì•½
    if 'policy_context' in truncated:
        for key, value in truncated['policy_context'].items():
            if isinstance(value, str) and len(value) > 200:
                truncated['policy_context'][key] = value[:200] + '...'
    
    return truncated
```

**ë³€ê²½ ì‚¬í•­**:
1. ëª¨ë“  `assemble_*` í•¨ìˆ˜ì— `is_preview` íŒŒë¼ë¯¸í„° ì¶”ê°€
2. `_apply_preview_truncation()` í—¬í¼ í•¨ìˆ˜ êµ¬í˜„
3. ë°ì´í„° êµ¬ì¡°ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€, ê¸¸ì´ë§Œ ì¶•ì•½

**ì˜ˆìƒ ìˆ˜ì • ë¼ì¸ ìˆ˜**: 50-80 lines

#### Step 1.2: ë¶„ì„í™”ë©´ API ìˆ˜ì •

**íŒŒì¼ ìœ„ì¹˜**: `app/api/endpoints/analysis_v9_1_REAL.py` ë˜ëŠ” `reports_v3.py`

**í˜„ì¬ ì½”ë“œ (ì¶”ì •)**:
```python
# ë¶„ì„í™”ë©´ HTML ìƒì„±
async def generate_analysis_html(context_id: str):
    summary = get_summary_only(context_id)  # âŒ ë¬¸ì œ
    html = render_summary_html(summary)
    return html
```

**ìˆ˜ì • í›„ ì½”ë“œ**:
```python
# ë¶„ì„í™”ë©´ HTML ìƒì„±
async def generate_analysis_html(context_id: str):
    # 1. canonical_summary ê°€ì ¸ì˜¤ê¸° (ìµœì¢…ë³´ê³ ì„œì™€ ë™ì¼)
    canonical_summary = await get_canonical_summary(context_id)
    
    # 2. assemblerë¡œ ë³´ê³ ì„œ ë°ì´í„° ì¡°ë¦½ (is_preview=True)
    report_data = assemble_all_in_one_report(
        context_id=context_id,
        canonical_summary=canonical_summary,
        is_preview=True  # â† ìš”ì•½ë³¸ ìƒì„±
    )
    
    # 3. rendererë¡œ HTML ìƒì„±
    html = render_all_in_one_report(report_data)
    
    return html
```

**ë³€ê²½ ì‚¬í•­**:
1. `get_summary_only()` í˜¸ì¶œ ì œê±°
2. `get_canonical_summary()` + `assemble_*_report()` + `render_*_report()` ì‚¬ìš©
3. `is_preview=True` í”Œë˜ê·¸ ì „ë‹¬

**ì˜ˆìƒ ìˆ˜ì • ë¼ì¸ ìˆ˜**: 10-20 lines

#### Step 1.3: ê¸°ì¡´ summary-only ë¡œì§ ì œê±°

**ê²€ìƒ‰ ëŒ€ìƒ íŒŒì¼**:
- `app/services/analysis_engine.py`
- `app/api/endpoints/analysis_*.py`

**ì‘ì—…**:
```bash
# 1. summary-only ê´€ë ¨ í•¨ìˆ˜ ê²€ìƒ‰
grep -r "summary_only\|summary-only" app/ --include="*.py"

# 2. í•´ë‹¹ í•¨ìˆ˜ë“¤ ì œê±° ë˜ëŠ” deprecated ë§ˆí‚¹
# 3. ê¸°ì¡´ í˜¸ì¶œ ì§€ì ì„ ìƒˆ ë¡œì§ìœ¼ë¡œ ëŒ€ì²´
```

**ì˜ˆìƒ ìˆ˜ì • ë¼ì¸ ìˆ˜**: 30-50 lines (ì œê±°)

### 1.3 í…ŒìŠ¤íŠ¸ ê³„íš

#### í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 1: ë°ì´í„° ì¼ì¹˜ì„± ê²€ì¦

```python
# test_analysis_report_parity.py

async def test_analysis_html_matches_final_report():
    """ë¶„ì„í™”ë©´ HTMLê³¼ ìµœì¢…ë³´ê³ ì„œ ë°ì´í„°ê°€ ë™ì¼í•œì§€ ê²€ì¦"""
    
    context_id = "test_12345"
    
    # 1. ë¶„ì„í™”ë©´ HTML ë°ì´í„° ì¶”ì¶œ
    analysis_data = await get_analysis_report_data(context_id, is_preview=True)
    
    # 2. ìµœì¢…ë³´ê³ ì„œ ë°ì´í„° ì¶”ì¶œ
    final_data = await get_final_report_data(context_id, is_preview=False)
    
    # 3. í•µì‹¬ í•„ë“œ ë¹„êµ
    assert analysis_data['npv_krw'] == final_data['npv_krw']
    assert analysis_data['irr_pct'] == final_data['irr_pct']
    assert analysis_data['overall_assessment'] == final_data['overall_assessment']
    
    # 4. ë¦¬ìŠ¤í¬ ê²°ë¡  ë¹„êµ
    assert analysis_data['risk_summary'] == final_data['risk_summary']
```

#### í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 2: Preview ì¶•ì•½ ë™ì‘ ê²€ì¦

```python
async def test_preview_truncation():
    """is_preview=Trueì¼ ë•Œ ì˜¬ë°”ë¥´ê²Œ ì¶•ì•½ë˜ëŠ”ì§€ ê²€ì¦"""
    
    full_data = assemble_all_in_one_report(context_id, summary, is_preview=False)
    preview_data = assemble_all_in_one_report(context_id, summary, is_preview=True)
    
    # ë¦¬ìŠ¤íŠ¸ ê¸¸ì´ ê²€ì¦
    assert len(full_data['approval_barriers']) > len(preview_data['approval_barriers'])
    assert len(preview_data['approval_barriers']) <= 3
    
    # í…ìŠ¤íŠ¸ ê¸¸ì´ ê²€ì¦
    assert len(preview_data['policy_context']['overview']) <= 200
```

### 1.4 ë°°í¬ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] `final_report_assembler.py`ì— `is_preview` íŒŒë¼ë¯¸í„° ì¶”ê°€
- [ ] `_apply_preview_truncation()` í•¨ìˆ˜ êµ¬í˜„
- [ ] ë¶„ì„í™”ë©´ APIì—ì„œ ìƒˆ ë¡œì§ ì‚¬ìš©
- [ ] summary-only ê´€ë ¨ ì½”ë“œ ì œê±°
- [ ] í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 2ê°œ í†µê³¼
- [ ] ë¶„ì„í™”ë©´ê³¼ ìµœì¢…ë³´ê³ ì„œ HTML ìˆ˜ë™ ë¹„êµ í™•ì¸

### 1.5 ì˜ˆìƒ ìœ„í—˜ ìš”ì†Œ

| ìœ„í—˜ | í™•ë¥  | ì˜í–¥ | ëŒ€ì‘ ë°©ì•ˆ |
|------|------|------|-----------|
| ê¸°ì¡´ API í˜¸ì¶œ ì§€ì  ëˆ„ë½ | ì¤‘ê°„ | ë†’ìŒ | ì „ì²´ grep ê²€ìƒ‰ìœ¼ë¡œ ëª¨ë“  í˜¸ì¶œ ì§€ì  íŒŒì•… |
| Preview ì¶•ì•½ ë¡œì§ ê³¼ë„ | ë‚®ìŒ | ì¤‘ê°„ | ì‚¬ìš©ì í”¼ë“œë°± ê¸°ë°˜ ì¡°ì • |
| ì„±ëŠ¥ ì €í•˜ (ë°ì´í„° í¬ê¸°) | ë‚®ìŒ | ë‚®ìŒ | ìºì‹± ì „ëµ ì ìš© |

---

## ğŸ”§ Task 2: ë¦¬ìŠ¤í¬ ë§ˆìŠ¤í„° ì‹œìŠ¤í…œí™”

### 2.1 ë¬¸ì œ ì •ì˜

**í˜„ì¬ ìƒí™©**:
- ë¦¬ìŠ¤í¬ ë§ˆìŠ¤í„° ë¬¸ì„œ (RISK_MASTER_V4.2_FULL_TEXT.md) ì™„ì„± âœ…
- ë³´ê³ ì„œë³„ ë³€í™˜ ë¬¸ì„œ ì¡´ì¬ âœ…
- **BUT**: ë³€í™˜ ê·œì¹™ì´ ë¬¸ì„œì—ë§Œ ìˆê³  ì½”ë“œë¡œ êµ¬í˜„ ì•ˆ ë¨ âŒ

**ë¬¸ì œì **:
- ê°™ì€ context_idë¼ë„ ìˆ˜ë™ìœ¼ë¡œ ë³´ê³ ì„œë³„ ë¦¬ìŠ¤í¬ë¥¼ ë‹¤ë¥´ê²Œ ì‘ì„±
- ìë™í™” ë¶ˆê°€ëŠ¥
- ì¼ê´€ì„± ë³´ì¥ ë¶ˆê°€

**ëª©í‘œ**:
- ë¦¬ìŠ¤í¬ ì ìš© ê·œì¹™ì„ ì½”ë“œë¡œ êµ¬í˜„
- `report_type`ì— ë”°ë¼ ìë™ìœ¼ë¡œ ì ì ˆí•œ ë¦¬ìŠ¤í¬ ì„ íƒ/ê°•ë„ ì¡°ì •

### 2.2 êµ¬í˜„ ê³„íš

#### Step 2.1: ë¦¬ìŠ¤í¬ ê·œì¹™ ë§¤í•‘ ì •ì˜

**ìƒˆ íŒŒì¼ ìƒì„±**: `app/services/risk_master_rules.py`

```python
"""
ë¦¬ìŠ¤í¬ ë§ˆìŠ¤í„° ì ìš© ê·œì¹™ ì—”ì§„

ë³´ê³ ì„œ íƒ€ì…ë³„ë¡œ ì–´ë–¤ ë¦¬ìŠ¤í¬ë¥¼ ì–´ë–¤ ê°•ë„ë¡œ ì ìš©í• ì§€ ì •ì˜
"""

from enum import Enum
from typing import Dict, List, Optional
from pydantic import BaseModel


class RiskType(str, Enum):
    """6ê°œ ë¦¬ìŠ¤í¬ íƒ€ì…"""
    R1_POLICY_CHANGE = "R1_ì •ì±…_ì œë„_ë³€ë™"
    R2_LH_REVIEW = "R2_LH_ì‹¬ì‚¬_ê¸°ì¤€"
    R3_LAND_PRICE = "R3_í† ì§€_ê°€ê²©_ë³€ë™"
    R4_BUILDING_SCALE = "R4_ê±´ì¶•_ê·œëª¨_ë²•ê·œ"
    R5_FINANCIAL = "R5_ì¬ë¬´_êµ¬ì¡°"
    R6_SCHEDULE_DELAY = "R6_ì‚¬ì—…_ì¼ì •_ì§€ì—°"


class RiskLevel(str, Enum):
    """ë¦¬ìŠ¤í¬ ì„œìˆ  ê°•ë„"""
    CRITICAL = "ìµœìš°ì„ "      # â­â­â­ ë§¤ìš° ìƒì„¸, ì‹œë‚˜ë¦¬ì˜¤ í¬í•¨
    HIGH = "ì¤‘ìš”"            # â­â­ ìƒì„¸, ëŒ€ì‘ ì „ëµ í¬í•¨
    MEDIUM = "ëª¨ë‹ˆí„°ë§"       # â­ ìš”ì•½ë§Œ
    OMIT = "ìƒëµ"            # ì–¸ê¸‰ ì•ˆ í•¨


class RiskTone(str, Enum):
    """ë¦¬ìŠ¤í¬ ì„œìˆ  í†¤"""
    FRIENDLY = "ì¹œí™”ì "          # í† ì§€ì£¼ìš©: "ê´€ë¦¬ ê°€ëŠ¥í•œ", "í•¨ê»˜ ëŒ€ì‘"
    OBJECTIVE = "ê°ê´€ì "         # LHìš©: "ê²€í† ë¨", "ê³ ë ¤ë¨"
    ANALYTICAL = "ë¶„ì„ì "        # íˆ¬ìììš©: "NPV ì˜í–¥", "IRR ë³€í™”"
    SUMMARY = "ìš”ì•½"             # Quick Checkìš©: í•µì‹¬ë§Œ
    COMPREHENSIVE = "ì¢…í•©"       # All-in-Oneìš©: ì „ì²´ ìƒì„¸


class ReportTypeRiskMapping(BaseModel):
    """ë³´ê³ ì„œ íƒ€ì…ë³„ ë¦¬ìŠ¤í¬ ì ìš© ê·œì¹™"""
    report_type: str
    risks: Dict[RiskType, RiskLevel]  # ì–´ë–¤ ë¦¬ìŠ¤í¬ë¥¼ ì–´ëŠ ê°•ë„ë¡œ
    tone: RiskTone                     # ì–´ë–¤ í†¤ìœ¼ë¡œ


# ========== ë³´ê³ ì„œ íƒ€ì…ë³„ ë¦¬ìŠ¤í¬ ë§¤í•‘ ì •ì˜ ==========

RISK_MAPPINGS = {
    "landowner_summary": ReportTypeRiskMapping(
        report_type="landowner_summary",
        risks={
            RiskType.R1_POLICY_CHANGE: RiskLevel.MEDIUM,
            RiskType.R2_LH_REVIEW: RiskLevel.MEDIUM,
            RiskType.R3_LAND_PRICE: RiskLevel.HIGH,      # í† ì§€ì£¼ëŠ” ê°€ê²©ì— ë¯¼ê°
            RiskType.R4_BUILDING_SCALE: RiskLevel.HIGH,
            RiskType.R5_FINANCIAL: RiskLevel.MEDIUM,
            RiskType.R6_SCHEDULE_DELAY: RiskLevel.MEDIUM,
        },
        tone=RiskTone.FRIENDLY
    ),
    
    "lh_technical": ReportTypeRiskMapping(
        report_type="lh_technical",
        risks={
            RiskType.R1_POLICY_CHANGE: RiskLevel.HIGH,
            RiskType.R2_LH_REVIEW: RiskLevel.HIGH,
            RiskType.R3_LAND_PRICE: RiskLevel.HIGH,
            RiskType.R4_BUILDING_SCALE: RiskLevel.CRITICAL,  # LHëŠ” ë²•ê·œ ì¤‘ì‹œ
            RiskType.R5_FINANCIAL: RiskLevel.HIGH,
            RiskType.R6_SCHEDULE_DELAY: RiskLevel.HIGH,
        },
        tone=RiskTone.OBJECTIVE
    ),
    
    "financial_feasibility": ReportTypeRiskMapping(
        report_type="financial_feasibility",
        risks={
            RiskType.R1_POLICY_CHANGE: RiskLevel.MEDIUM,
            RiskType.R2_LH_REVIEW: RiskLevel.MEDIUM,
            RiskType.R3_LAND_PRICE: RiskLevel.CRITICAL,   # íˆ¬ììëŠ” ìˆ˜ìµì„± ì¤‘ì‹œ
            RiskType.R4_BUILDING_SCALE: RiskLevel.HIGH,
            RiskType.R5_FINANCIAL: RiskLevel.CRITICAL,
            RiskType.R6_SCHEDULE_DELAY: RiskLevel.CRITICAL,
        },
        tone=RiskTone.ANALYTICAL
    ),
    
    "quick_check": ReportTypeRiskMapping(
        report_type="quick_check",
        risks={
            RiskType.R1_POLICY_CHANGE: RiskLevel.OMIT,
            RiskType.R2_LH_REVIEW: RiskLevel.MEDIUM,
            RiskType.R3_LAND_PRICE: RiskLevel.CRITICAL,
            RiskType.R4_BUILDING_SCALE: RiskLevel.MEDIUM,
            RiskType.R5_FINANCIAL: RiskLevel.CRITICAL,
            RiskType.R6_SCHEDULE_DELAY: RiskLevel.CRITICAL,
        },
        tone=RiskTone.SUMMARY
    ),
    
    "all_in_one": ReportTypeRiskMapping(
        report_type="all_in_one",
        risks={
            RiskType.R1_POLICY_CHANGE: RiskLevel.CRITICAL,
            RiskType.R2_LH_REVIEW: RiskLevel.CRITICAL,
            RiskType.R3_LAND_PRICE: RiskLevel.CRITICAL,
            RiskType.R4_BUILDING_SCALE: RiskLevel.CRITICAL,
            RiskType.R5_FINANCIAL: RiskLevel.CRITICAL,
            RiskType.R6_SCHEDULE_DELAY: RiskLevel.CRITICAL,
        },
        tone=RiskTone.COMPREHENSIVE
    ),
    
    "presentation": ReportTypeRiskMapping(
        report_type="presentation",
        risks={
            RiskType.R1_POLICY_CHANGE: RiskLevel.OMIT,
            RiskType.R2_LH_REVIEW: RiskLevel.OMIT,
            RiskType.R3_LAND_PRICE: RiskLevel.HIGH,
            RiskType.R4_BUILDING_SCALE: RiskLevel.MEDIUM,
            RiskType.R5_FINANCIAL: RiskLevel.HIGH,
            RiskType.R6_SCHEDULE_DELAY: RiskLevel.HIGH,
        },
        tone=RiskTone.SUMMARY
    ),
}


def get_risk_mapping(report_type: str) -> ReportTypeRiskMapping:
    """
    ë³´ê³ ì„œ íƒ€ì…ì— ë”°ë¥¸ ë¦¬ìŠ¤í¬ ì ìš© ê·œì¹™ ë°˜í™˜
    
    Args:
        report_type: ë³´ê³ ì„œ íƒ€ì… (landowner_summary, lh_technical, etc.)
    
    Returns:
        í•´ë‹¹ ë³´ê³ ì„œ íƒ€ì…ì˜ ë¦¬ìŠ¤í¬ ë§¤í•‘ ê·œì¹™
    """
    if report_type not in RISK_MAPPINGS:
        # ê¸°ë³¸ê°’: All-in-Oneê³¼ ë™ì¼ (ëª¨ë“  ë¦¬ìŠ¤í¬ í¬í•¨)
        return RISK_MAPPINGS["all_in_one"]
    
    return RISK_MAPPINGS[report_type]


def should_include_risk(report_type: str, risk_type: RiskType) -> bool:
    """
    íŠ¹ì • ë³´ê³ ì„œ íƒ€ì…ì—ì„œ íŠ¹ì • ë¦¬ìŠ¤í¬ë¥¼ í¬í•¨í•´ì•¼ í•˜ëŠ”ì§€ íŒë‹¨
    
    Args:
        report_type: ë³´ê³ ì„œ íƒ€ì…
        risk_type: ë¦¬ìŠ¤í¬ íƒ€ì…
    
    Returns:
        True if í¬í•¨, False if ìƒëµ
    """
    mapping = get_risk_mapping(report_type)
    level = mapping.risks.get(risk_type, RiskLevel.OMIT)
    return level != RiskLevel.OMIT


def get_risk_detail_level(report_type: str, risk_type: RiskType) -> RiskLevel:
    """
    íŠ¹ì • ë³´ê³ ì„œ íƒ€ì…ì—ì„œ íŠ¹ì • ë¦¬ìŠ¤í¬ì˜ ì„œìˆ  ìƒì„¸ë„ ë°˜í™˜
    
    Args:
        report_type: ë³´ê³ ì„œ íƒ€ì…
        risk_type: ë¦¬ìŠ¤í¬ íƒ€ì…
    
    Returns:
        RiskLevel enum (CRITICAL, HIGH, MEDIUM, OMIT)
    """
    mapping = get_risk_mapping(report_type)
    return mapping.risks.get(risk_type, RiskLevel.OMIT)


def get_risk_tone(report_type: str) -> RiskTone:
    """
    ë³´ê³ ì„œ íƒ€ì…ì— ë”°ë¥¸ ë¦¬ìŠ¤í¬ ì„œìˆ  í†¤ ë°˜í™˜
    
    Args:
        report_type: ë³´ê³ ì„œ íƒ€ì…
    
    Returns:
        RiskTone enum (FRIENDLY, OBJECTIVE, ANALYTICAL, etc.)
    """
    mapping = get_risk_mapping(report_type)
    return mapping.tone
```

**ìƒˆ íŒŒì¼**: ì•½ 200 lines

#### Step 2.2: `final_report_assembler.py` í†µí•©

**íŒŒì¼ ìœ„ì¹˜**: `app/services/final_report_assembler.py`

**ê¸°ì¡´ ì½”ë“œ (ì¶”ì •)**:
```python
def assemble_financial_feasibility(context_id, canonical_summary):
    # í•˜ë“œì½”ë”©ëœ ë¦¬ìŠ¤í¬ í¬í•¨
    report_data = {
        "risks": [
            "R3: í† ì§€ ê°€ê²© ë³€ë™",
            "R5: ì¬ë¬´ êµ¬ì¡°",
            # ...
        ]
    }
    return report_data
```

**ìˆ˜ì • í›„ ì½”ë“œ**:
```python
from app.services.risk_master_rules import (
    get_risk_mapping,
    should_include_risk,
    get_risk_detail_level,
    RiskType
)

def assemble_financial_feasibility(
    context_id: str,
    canonical_summary: Dict[str, Any],
    is_preview: bool = False
) -> Dict[str, Any]:
    """Financial Feasibility Report ì¡°ë¦½"""
    
    report_type = "financial_feasibility"
    
    # 1. ì´ ë³´ê³ ì„œ íƒ€ì…ì— í¬í•¨í•  ë¦¬ìŠ¤í¬ ìë™ ê²°ì •
    included_risks = []
    for risk_type in RiskType:
        if should_include_risk(report_type, risk_type):
            level = get_risk_detail_level(report_type, risk_type)
            included_risks.append({
                "type": risk_type.value,
                "level": level.value,
                "content": _get_risk_content(risk_type, level, canonical_summary)
            })
    
    report_data = {
        "context_id": context_id,
        "report_type": report_type,
        "risks": included_risks,
        # ... ë‚˜ë¨¸ì§€ ë°ì´í„°
    }
    
    return report_data


def _get_risk_content(
    risk_type: RiskType,
    level: RiskLevel,
    canonical_summary: Dict[str, Any]
) -> str:
    """
    ë¦¬ìŠ¤í¬ íƒ€ì…ê³¼ ë ˆë²¨ì— ë”°ë¼ ì ì ˆí•œ ì½˜í…ì¸  ìƒì„±
    
    - CRITICAL: 6ë‹¨ê³„ êµ¬ì¡° ì „ì²´ (ì •ì˜, ì›ì¸, ì‹œë‚˜ë¦¬ì˜¤, ì˜í–¥, ì „ëµ, íŒë‹¨)
    - HIGH: 3ë‹¨ê³„ êµ¬ì¡° (ì •ì˜, ì˜í–¥, ì „ëµ)
    - MEDIUM: 1ë‹¨ê³„ êµ¬ì¡° (ìš”ì•½ë§Œ)
    """
    if level == RiskLevel.CRITICAL:
        return _generate_detailed_risk_content(risk_type, canonical_summary)
    elif level == RiskLevel.HIGH:
        return _generate_medium_risk_content(risk_type, canonical_summary)
    elif level == RiskLevel.MEDIUM:
        return _generate_summary_risk_content(risk_type, canonical_summary)
    else:
        return ""
```

**ë³€ê²½ ì‚¬í•­**:
1. ëª¨ë“  `assemble_*` í•¨ìˆ˜ì— risk_master_rules import
2. í•˜ë“œì½”ë”©ëœ ë¦¬ìŠ¤í¬ ì„ íƒì„ `should_include_risk()` í˜¸ì¶œë¡œ ëŒ€ì²´
3. ë¦¬ìŠ¤í¬ ìƒì„¸ë„ë¥¼ `get_risk_detail_level()`ë¡œ ê²°ì •

**ì˜ˆìƒ ìˆ˜ì • ë¼ì¸ ìˆ˜**: 100-150 lines

#### Step 2.3: ë¦¬ìŠ¤í¬ ì½˜í…ì¸  ìƒì„± í—¬í¼ í•¨ìˆ˜

**íŒŒì¼ ìœ„ì¹˜**: `app/services/risk_content_generator.py` (ì‹ ê·œ)

```python
"""
ë¦¬ìŠ¤í¬ ë§ˆìŠ¤í„° ì½˜í…ì¸  ìƒì„±ê¸°

RISK_MASTER_V4.2_FULL_TEXT.mdì˜ ë‚´ìš©ì„
ë³´ê³ ì„œ íƒ€ì…ê³¼ ë¦¬ìŠ¤í¬ ë ˆë²¨ì— ë”°ë¼ ìë™ ë³€í™˜
"""

from typing import Dict, Any
from app.services.risk_master_rules import RiskType, RiskLevel, RiskTone


# ========== ë¦¬ìŠ¤í¬ ë§ˆìŠ¤í„° ì›ë³¸ (êµ¬ì¡°í™”ëœ ë”•ì…”ë„ˆë¦¬) ==========

RISK_MASTER_CONTENT = {
    RiskType.R1_POLICY_CHANGE: {
        "definition": "LH ì‹ ì¶•ë§¤ì…ì„ëŒ€ ì œë„ëŠ” êµ­ê°€ ì£¼íƒì •ì±…ê³¼ ì˜ˆì‚°ì— ë”°ë¼ ë³€ë™ ê°€ëŠ¥...",
        "causes": ["ì˜ˆì‚° ì¶•ì†Œ", "ì§€ì—­ë³„ ê³µê¸‰ ì¡°ì •", "ë§¤ì… ê¸°ì¤€ ë³€ê²½"],
        "scenarios": [
            {
                "title": "ì˜ˆì‚° ì¶•ì†Œë¡œ ì¸í•œ ìš°ì„ ìˆœìœ„ í•˜ë½",
                "description": "LH ì˜ˆì‚° 20% ì¶•ì†Œ ì‹œ ì…ì§€ ìš°ìˆ˜ ì§€ì—­ ìš°ì„ ...",
                "impact_npv": "-",
                "impact_irr": "-1.7%p",
            }
        ],
        "impact": "ì‚¬ì—… ìŠ¹ì¸ ì§€ì—° 6-12ê°œì›”, ì´ì ë¹„ìš© 1-2ì–µì› ì¦ê°€",
        "mitigation": ["LH ì‚¬ì „ í˜‘ì˜", "ì¡°ê±´ë¶€ í† ì§€ ê³„ì•½", "ì •ì±… ëª¨ë‹ˆí„°ë§"],
        "decision": "ì •ì±… ë³€ë™ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ê³ ë ¤í•œ ì˜ˆë¹„ ê³„íš í•„ìˆ˜"
    },
    # R2-R6 ë™ì¼ êµ¬ì¡°...
}


def generate_risk_content(
    risk_type: RiskType,
    level: RiskLevel,
    tone: RiskTone,
    canonical_summary: Dict[str, Any]
) -> str:
    """
    ë¦¬ìŠ¤í¬ ì½˜í…ì¸  ìƒì„±
    
    Args:
        risk_type: ë¦¬ìŠ¤í¬ íƒ€ì…
        level: ìƒì„¸ë„ (CRITICAL, HIGH, MEDIUM)
        tone: ì„œìˆ  í†¤ (FRIENDLY, OBJECTIVE, ANALYTICAL)
        canonical_summary: í”„ë¡œì íŠ¸ ë°ì´í„°
    
    Returns:
        HTML í¬ë§· ë¦¬ìŠ¤í¬ ì½˜í…ì¸ 
    """
    master = RISK_MASTER_CONTENT[risk_type]
    
    if level == RiskLevel.CRITICAL:
        return _generate_detailed(master, tone, canonical_summary)
    elif level == RiskLevel.HIGH:
        return _generate_medium(master, tone, canonical_summary)
    elif level == RiskLevel.MEDIUM:
        return _generate_summary(master, tone, canonical_summary)
    else:
        return ""


def _generate_detailed(
    master: Dict[str, Any],
    tone: RiskTone,
    data: Dict[str, Any]
) -> str:
    """6ë‹¨ê³„ êµ¬ì¡° ì „ì²´ ìƒì„±"""
    
    # í†¤ì— ë”°ë¼ í‘œí˜„ ì¡°ì •
    if tone == RiskTone.FRIENDLY:
        intro = "ì´ ë¶€ë¶„ì€ ê±±ì •í•˜ì‹¤ ìˆ˜ ìˆì§€ë§Œ, ì¶©ë¶„íˆ ê´€ë¦¬ ê°€ëŠ¥í•©ë‹ˆë‹¤."
    elif tone == RiskTone.OBJECTIVE:
        intro = "ë‹¤ìŒ ì‚¬í•­ì´ ê²€í† ë˜ì—ˆìŠµë‹ˆë‹¤."
    elif tone == RiskTone.ANALYTICAL:
        intro = "ìˆ˜ìµì„±ì— ì§ì ‘ì ì¸ ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” í•µì‹¬ ë¦¬ìŠ¤í¬ì…ë‹ˆë‹¤."
    else:
        intro = master["definition"]
    
    html = f"""
    <div class="risk-section">
        <h3>{master['definition']}</h3>
        <p>{intro}</p>
        
        <h4>ë°œìƒ ì›ì¸</h4>
        <ul>
            {''.join(f'<li>{cause}</li>' for cause in master['causes'])}
        </ul>
        
        <h4>ì‹œë‚˜ë¦¬ì˜¤</h4>
        {_render_scenarios(master['scenarios'], data)}
        
        <h4>ì˜í–¥ ë¶„ì„</h4>
        <p>{master['impact']}</p>
        
        <h4>ëŒ€ì‘ ì „ëµ</h4>
        <ul>
            {''.join(f'<li>{m}</li>' for m in master['mitigation'])}
        </ul>
        
        <h4>ì˜ì‚¬ê²°ì • ì‹œì‚¬ì </h4>
        <p>{master['decision']}</p>
    </div>
    """
    
    return html


def _generate_medium(master: Dict[str, Any], tone: RiskTone, data: Dict[str, Any]) -> str:
    """3ë‹¨ê³„ êµ¬ì¡° (ì •ì˜, ì˜í–¥, ì „ëµ)"""
    html = f"""
    <div class="risk-section">
        <h3>{master['definition']}</h3>
        <p><strong>ì˜í–¥:</strong> {master['impact']}</p>
        <p><strong>ëŒ€ì‘:</strong> {', '.join(master['mitigation'])}</p>
    </div>
    """
    return html


def _generate_summary(master: Dict[str, Any], tone: RiskTone, data: Dict[str, Any]) -> str:
    """1ë‹¨ê³„ êµ¬ì¡° (ìš”ì•½ë§Œ)"""
    return f"<p>{master['definition']} - {master['impact']}</p>"


def _render_scenarios(scenarios: List[Dict], data: Dict[str, Any]) -> str:
    """ì‹œë‚˜ë¦¬ì˜¤ í…Œì´ë¸” ë Œë”ë§"""
    rows = []
    for sc in scenarios:
        rows.append(f"""
        <tr>
            <td>{sc['title']}</td>
            <td>{sc['impact_npv']}</td>
            <td>{sc['impact_irr']}</td>
        </tr>
        """)
    
    return f"""
    <table class="scenario-table">
        <thead>
            <tr><th>ì‹œë‚˜ë¦¬ì˜¤</th><th>NPV ì˜í–¥</th><th>IRR ì˜í–¥</th></tr>
        </thead>
        <tbody>
            {''.join(rows)}
        </tbody>
    </table>
    """
```

**ìƒˆ íŒŒì¼**: ì•½ 300 lines

### 2.3 í…ŒìŠ¤íŠ¸ ê³„íš

```python
# test_risk_master_rules.py

def test_risk_mapping_landowner():
    """Landowner ë³´ê³ ì„œëŠ” R3 ë¦¬ìŠ¤í¬ë¥¼ HIGH ë ˆë²¨ë¡œ í¬í•¨"""
    assert should_include_risk("landowner_summary", RiskType.R3_LAND_PRICE) == True
    assert get_risk_detail_level("landowner_summary", RiskType.R3_LAND_PRICE) == RiskLevel.HIGH
    assert get_risk_tone("landowner_summary") == RiskTone.FRIENDLY


def test_risk_mapping_financial():
    """Financial ë³´ê³ ì„œëŠ” R3, R5, R6ì„ CRITICALë¡œ í¬í•¨"""
    assert get_risk_detail_level("financial_feasibility", RiskType.R3_LAND_PRICE) == RiskLevel.CRITICAL
    assert get_risk_detail_level("financial_feasibility", RiskType.R5_FINANCIAL) == RiskLevel.CRITICAL


def test_risk_content_generation():
    """ë¦¬ìŠ¤í¬ ì½˜í…ì¸ ê°€ ì˜¬ë°”ë¥´ê²Œ ìƒì„±ë˜ëŠ”ì§€ ê²€ì¦"""
    content = generate_risk_content(
        RiskType.R3_LAND_PRICE,
        RiskLevel.CRITICAL,
        RiskTone.ANALYTICAL,
        canonical_summary={}
    )
    
    assert "NPV" in content
    assert "IRR" in content
    assert "ì‹œë‚˜ë¦¬ì˜¤" in content
```

### 2.4 ë°°í¬ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] `risk_master_rules.py` ì‹ ê·œ ìƒì„±
- [ ] `risk_content_generator.py` ì‹ ê·œ ìƒì„±
- [ ] `final_report_assembler.py`ì— risk rules í†µí•©
- [ ] 6ê°œ ë¦¬ìŠ¤í¬ Ã— 6ê°œ ë³´ê³ ì„œ íƒ€ì… = 36ê°œ ì¡°í•© ê²€ì¦
- [ ] í†¤ ë³€í™” ìˆ˜ë™ í™•ì¸ (Friendly vs Objective vs Analytical)

---

## ğŸ”§ Task 3: ê²°ë¡  ì¹´ë“œ í‘œì¤€í™”

### 3.1 ë¬¸ì œ ì •ì˜

**í˜„ì¬ ìƒí™©**:
- ê²°ë¡  ì¹´ë“œëŠ” ì¡´ì¬í•˜ë‚˜ ìœ„ì¹˜ì™€ í˜•ì‹ì´ ë³´ê³ ì„œë§ˆë‹¤ ë‹¤ë¦„
- ì¼ë¶€ëŠ” 1í˜ì´ì§€ ìƒë‹¨, ì¼ë¶€ëŠ” ì¤‘í›„ë°˜
- ì¼ë¶€ëŠ” ì¹´ë“œ UI, ì¼ë¶€ëŠ” í…ìŠ¤íŠ¸ ë¸”ë¡

**ëª©í‘œ**:
- ëª¨ë“  ë³´ê³ ì„œì—ì„œ ë™ì¼í•œ ìœ„ì¹˜, ë™ì¼í•œ í˜•ì‹
- ì„ì›/ì˜ì‚¬ê²°ì •ìê°€ 3ì´ˆ ì•ˆì— ê²°ë¡  íŒŒì•…

### 3.2 êµ¬í˜„ ê³„íš

#### Step 3.1: ê²°ë¡  ì¹´ë“œ ì»´í¬ë„ŒíŠ¸ ì •ì˜

**íŒŒì¼ ìœ„ì¹˜**: `app/services/decision_card_component.py` (ì‹ ê·œ)

```python
"""
ê²°ë¡  ì¹´ë“œ (Decision Card) í‘œì¤€ ì»´í¬ë„ŒíŠ¸

ëª¨ë“  ìµœì¢… ë³´ê³ ì„œì— ë™ì¼í•œ í˜•ì‹ìœ¼ë¡œ ì‚½ì…
"""

from typing import Dict, List, Optional
from enum import Enum


class DecisionStatus(str, Enum):
    """ìµœì¢… íŒë‹¨"""
    GO = "GO - ì¶”ì§„ ê¶Œì¥"
    CONDITIONAL = "CONDITIONAL - ì¡°ê±´ë¶€ ê²€í† "
    NO_GO = "NO-GO - ì¶”ì§„ ë³´ë¥˜"


class DecisionCard:
    """ê²°ë¡  ì¹´ë“œ ë°ì´í„° ëª¨ë¸"""
    
    def __init__(
        self,
        decision: DecisionStatus,
        approval_probability_pct: Optional[float],
        key_risks: List[str],  # ìµœëŒ€ 3ê°œ
        next_actions: List[str],  # ìµœëŒ€ 3ê°œ
        headline: str,
        rationale: str
    ):
        self.decision = decision
        self.approval_probability_pct = approval_probability_pct
        self.key_risks = key_risks[:3]  # ìµœëŒ€ 3ê°œë¡œ ì œí•œ
        self.next_actions = next_actions[:3]
        self.headline = headline
        self.rationale = rationale
    
    def to_html(self) -> str:
        """í‘œì¤€ HTML ì¹´ë“œ ìƒì„±"""
        
        # Decision ìƒíƒœì— ë”°ë¥¸ ìƒ‰ìƒ
        color_map = {
            DecisionStatus.GO: "#10B981",
            DecisionStatus.CONDITIONAL: "#F59E0B",
            DecisionStatus.NO_GO: "#EF4444"
        }
        color = color_map[self.decision]
        
        # Icon
        icon_map = {
            DecisionStatus.GO: "âœ…",
            DecisionStatus.CONDITIONAL: "âš ï¸",
            DecisionStatus.NO_GO: "âŒ"
        }
        icon = icon_map[self.decision]
        
        html = f"""
        <!-- ========== DECISION CARD (Standard v4.3) ========== -->
        <div class="decision-card-v43" style="
            background: linear-gradient(135deg, {color}15, {color}05);
            border: 3px solid {color};
            border-radius: 16px;
            padding: 32px;
            margin: 40px 0;
            page-break-inside: avoid;
        ">
            <!-- Header -->
            <div style="text-align: center; margin-bottom: 24px;">
                <div style="font-size: 64px; margin-bottom: 12px;">{icon}</div>
                <div style="font-size: 32px; font-weight: 700; color: {color}; margin-bottom: 8px;">
                    {self.decision.value}
                </div>
                <div style="font-size: 18px; color: #4B5563; line-height: 1.6;">
                    {self.headline}
                </div>
            </div>
            
            <!-- Key Metrics -->
            <div style="display: flex; justify-content: space-around; margin: 24px 0; padding: 20px; background: white; border-radius: 12px;">
                <div style="text-align: center;">
                    <div style="font-size: 14px; color: #6B7280; margin-bottom: 4px;">LH ìŠ¹ì¸ ê°€ëŠ¥ì„±</div>
                    <div style="font-size: 28px; font-weight: 700; color: {color};">
                        {self.approval_probability_pct:.0f}%
                    </div>
                </div>
            </div>
            
            <!-- Rationale -->
            <div style="margin: 20px 0; padding: 20px; background: white; border-radius: 12px;">
                <div style="font-weight: 600; margin-bottom: 8px; color: #1F2937;">íŒë‹¨ ê·¼ê±°</div>
                <div style="line-height: 1.8; color: #4B5563;">
                    {self.rationale}
                </div>
            </div>
            
            <!-- Key Risks -->
            <div style="margin: 20px 0;">
                <div style="font-weight: 600; margin-bottom: 12px; color: #1F2937;">âš ï¸ í•µì‹¬ ë¦¬ìŠ¤í¬ (ìƒìœ„ 3ê°œ)</div>
                <div style="background: white; border-radius: 12px; padding: 16px;">
                    {''.join(f'<div style="padding: 8px 0; border-bottom: 1px solid #F3F4F6;"><strong>{i+1}.</strong> {risk}</div>' for i, risk in enumerate(self.key_risks))}
                </div>
            </div>
            
            <!-- Next Actions -->
            <div style="margin: 20px 0;">
                <div style="font-weight: 600; margin-bottom: 12px; color: #1F2937;">ğŸ¯ ë‹¤ìŒ í–‰ë™ 3ë‹¨ê³„</div>
                <div style="background: white; border-radius: 12px; padding: 16px;">
                    {''.join(f'<div style="padding: 8px 0; border-bottom: 1px solid #F3F4F6;"><strong>Step {i+1}.</strong> {action}</div>' for i, action in enumerate(self.next_actions))}
                </div>
            </div>
        </div>
        <!-- ========== END DECISION CARD ========== -->
        """
        
        return html


def create_decision_card(report_data: Dict) -> DecisionCard:
    """
    ë³´ê³ ì„œ ë°ì´í„°ë¡œë¶€í„° ê²°ë¡  ì¹´ë“œ ìƒì„±
    
    Args:
        report_data: final_report_assembler ì¶œë ¥ ë°ì´í„°
    
    Returns:
        DecisionCard ê°ì²´
    """
    
    # 1. Decision ê²°ì •
    npv = report_data.get('npv_krw', 0)
    irr = report_data.get('irr_pct', 0)
    approval_prob = report_data.get('approval_probability_pct', 0)
    
    if npv >= 300000000 and irr >= 12 and approval_prob >= 70:
        decision = DecisionStatus.GO
        headline = "ì´ ì‚¬ì—…ì€ íˆ¬ì ê°€ì¹˜ê°€ ì¶©ë¶„í•˜ë©°, ì¦‰ì‹œ ì¶”ì§„ì„ ê¶Œì¥í•©ë‹ˆë‹¤."
    elif npv > 0 and irr >= 8 and approval_prob >= 50:
        decision = DecisionStatus.CONDITIONAL
        headline = "ì¡°ê±´ ë³´ì™„ ì‹œ ì¶”ì§„ ê°€ëŠ¥í•˜ë©°, ë¦¬ìŠ¤í¬ ê´€ë¦¬ê°€ í•„ìš”í•©ë‹ˆë‹¤."
    else:
        decision = DecisionStatus.NO_GO
        headline = "í˜„ì¬ ì¡°ê±´ìœ¼ë¡œëŠ” ì¶”ì§„ì´ ì–´ë ¤ìš°ë©°, ê·¼ë³¸ì ì¸ ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤."
    
    # 2. Rationale
    rationale = f"""
    ìˆœí˜„ì¬ê°€ì¹˜(NPV) {format_currency(npv)}, ë‚´ë¶€ìˆ˜ìµë¥ (IRR) {irr:.1f}%, 
    LH ìŠ¹ì¸ ê°€ëŠ¥ì„± {approval_prob:.0f}%ë¥¼ ì¢…í•© ê²€í† í•œ ê²°ê³¼ì…ë‹ˆë‹¤.
    """
    
    # 3. Key Risks (ìƒìœ„ 3ê°œ)
    key_risks = report_data.get('top_risks', [
        "í† ì§€ ê°€ê²© ë³€ë™ (ê°ì •í‰ê°€ +10% ì‹œ NPV -50%)",
        "ê¸ˆìœµ ë¹„ìš© ì¦ê°€ (ê¸ˆë¦¬ +1%p ì‹œ NPV -37%)",
        "ì‚¬ì—… ì¼ì • ì§€ì—° (6ê°œì›” ì§€ì—° ì‹œ NPV -56%)"
    ])
    
    # 4. Next Actions
    if decision == DecisionStatus.GO:
        next_actions = [
            "LH ê³µì‹ ì‚¬ì „ í˜‘ì˜ ì§„í–‰ (ìŠ¹ì¸ ê°€ëŠ¥ì„± 70%+ í™•ì¸)",
            "ì‹œê³µì‚¬ ì„ ì • ë° ê±´ì¶•ë¹„ ê²¬ì  í™•ë³´",
            "ìê¸ˆ ì¡°ë‹¬ ê³„íš ìˆ˜ë¦½ (PF ëŒ€ì¶œ 70% + ìê¸°ìë³¸ 30%)"
        ]
    elif decision == DecisionStatus.CONDITIONAL:
        next_actions = [
            "í•µì‹¬ ë¦¬ìŠ¤í¬ 3ê°œì— ëŒ€í•œ ì¶”ê°€ ë¶„ì„ ìˆ˜í–‰",
            "LH ì§€ì—­ë³¸ë¶€ì™€ ë³´ì™„ ì‚¬í•­ í˜‘ì˜",
            "ë¦¬ìŠ¤í¬ ê´€ë¦¬ ë°©ì•ˆ ìˆ˜ë¦½ í›„ ì¬ê²€í† "
        ]
    else:
        next_actions = [
            "ì‚¬ì—… êµ¬ì¡° ì „ë©´ ì¬ê²€í†  (ê·œëª¨, ìœ í˜•, ê°€ê²©)",
            "ëŒ€ì²´ ì¶œêµ¬ ì „ëµ ê²€í†  (LH ì™¸ ë‹¤ë¥¸ ë§¤ìˆ˜ì)",
            "í† ì§€ ê³„ì•½ í•´ì§€ ë˜ëŠ” ì¬í˜‘ìƒ"
        ]
    
    return DecisionCard(
        decision=decision,
        approval_probability_pct=approval_prob,
        key_risks=key_risks,
        next_actions=next_actions,
        headline=headline,
        rationale=rationale
    )
```

**ìƒˆ íŒŒì¼**: ì•½ 200 lines

#### Step 3.2: HTML Rendererì— ê²°ë¡  ì¹´ë“œ ì‚½ì…

**íŒŒì¼ ìœ„ì¹˜**: `app/services/final_report_html_renderer.py`

**ìˆ˜ì • ìœ„ì¹˜**: ê° `render_*` í•¨ìˆ˜ì˜ ë§¨ ì•

**ì˜ˆì‹œ (All-in-One)**:
```python
def render_all_in_one_report(data: Dict[str, Any]) -> str:
    """All-in-One ë³´ê³ ì„œ HTML ë Œë”ë§"""
    
    # ========== v4.3: ê²°ë¡  ì¹´ë“œ ìƒì„± ==========
    from app.services.decision_card_component import create_decision_card
    
    decision_card = create_decision_card(data)
    decision_card_html = decision_card.to_html()
    
    html = f"""
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <title>All-in-One ì¢…í•© ìµœì¢… ë³´ê³ ì„œ</title>
        {get_common_styles()}
    </head>
    <body>
        <div class="report-container">
            <div class="report-header">
                <div class="report-title">All-in-One ì¢…í•© ìµœì¢… ë³´ê³ ì„œ</div>
                ...
            </div>
            
            <!-- ========== v4.3: ê²°ë¡  ì¹´ë“œ ìµœìƒë‹¨ ë°°ì¹˜ ========== -->
            {decision_card_html}
            
            <!-- ë‚˜ë¨¸ì§€ ì½˜í…ì¸  -->
            <div class="report-content">
                ...
            </div>
        </div>
    </body>
    </html>
    """
    
    return html
```

**ë³€ê²½ ì‚¬í•­**:
- 6ê°œ ëª¨ë“  `render_*` í•¨ìˆ˜ì— ë™ì¼í•˜ê²Œ ì ìš©
- ê²°ë¡  ì¹´ë“œëŠ” ë°˜ë“œì‹œ report-header ë°”ë¡œ ë‹¤ìŒì— ìœ„ì¹˜

**ì˜ˆìƒ ìˆ˜ì • ë¼ì¸ ìˆ˜**: ê° í•¨ìˆ˜ë‹¹ 10 lines Ã— 6 = 60 lines

### 3.3 í…ŒìŠ¤íŠ¸ ê³„íš

```python
# test_decision_card.py

def test_decision_card_go():
    """GO ìƒíƒœ ê²°ë¡  ì¹´ë“œ ìƒì„± ê²€ì¦"""
    data = {
        'npv_krw': 500000000,
        'irr_pct': 14.5,
        'approval_probability_pct': 82
    }
    
    card = create_decision_card(data)
    
    assert card.decision == DecisionStatus.GO
    assert "ì¶”ì§„ ê¶Œì¥" in card.headline
    assert len(card.key_risks) <= 3
    assert len(card.next_actions) <= 3


def test_decision_card_html_structure():
    """ê²°ë¡  ì¹´ë“œ HTML êµ¬ì¡° ê²€ì¦"""
    card = DecisionCard(
        decision=DecisionStatus.GO,
        approval_probability_pct=75,
        key_risks=["Risk 1", "Risk 2"],
        next_actions=["Action 1", "Action 2"],
        headline="Test",
        rationale="Test rationale"
    )
    
    html = card.to_html()
    
    assert "decision-card-v43" in html
    assert "75%" in html
    assert "Risk 1" in html
    assert "Action 1" in html
```

### 3.4 ë°°í¬ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] `decision_card_component.py` ì‹ ê·œ ìƒì„±
- [ ] 6ê°œ ëª¨ë“  render í•¨ìˆ˜ì— ê²°ë¡  ì¹´ë“œ ì‚½ì…
- [ ] GO/CONDITIONAL/NO-GO ê° ìƒíƒœ ì‹œê°ì  ê²€ì¦
- [ ] ëª¨ë“  ë³´ê³ ì„œì—ì„œ ì¹´ë“œ ìœ„ì¹˜ ìµœìƒë‹¨ í™•ì¸

---

## ğŸ”§ Task 4: í˜ì´ì§€ ë°€ë„ ì •ê·œí™”

### 4.1 ë¬¸ì œ ì •ì˜

**í˜„ì¬ ìƒí™©**:
- í‰ê·  52í˜ì´ì§€ ë‹¬ì„± âœ…
- í•˜ì§€ë§Œ í˜ì´ì§€ë³„ ì •ë³´ ë°€ë„ í¸ì°¨ í¼
- ì¼ë¶€ í˜ì´ì§€ëŠ” í…ìŠ¤íŠ¸ ê³¼ë‹¤, ì¼ë¶€ëŠ” ê³µë°± ê³¼ë‹¤

**ëª©í‘œ**:
- 1 page = 1 core message
- ëª¨ë“  ì„¹ì…˜ì— "í•µì‹¬ ìš”ì•½ ë°•ìŠ¤" + "ì˜ì‚¬ê²°ì • ì‹œì‚¬ì " í¬í•¨
- ëŒ€í˜• ì»¨ì„¤íŒ…ì‚¬ ê¸°ì¤€ í’ˆì§ˆ

### 4.2 êµ¬í˜„ ê³„íš

#### Step 4.1: ì„¹ì…˜ í…œí”Œë¦¿ í‘œì¤€í™”

**ì»¨ì…‰**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ì„¹ì…˜ ë²ˆí˜¸] ì„¹ì…˜ ì œëª©               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Œ í•µì‹¬ ìš”ì•½ ë°•ìŠ¤                    â”‚
â”‚ - ì´ ì„¹ì…˜ì˜ í•µì‹¬ ë©”ì‹œì§€ 1-2ë¬¸ì¥      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ë°ì´í„° & ì°¨íŠ¸                        â”‚
â”‚ (í‘œ, ê·¸ë˜í”„, ìˆ˜ì¹˜)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ í•´ì„ & ë¶„ì„                          â”‚
â”‚ (ë¶ˆë¦¿ í¬ì¸íŠ¸ + ë‹¨ë½)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ’¡ ì˜ì‚¬ê²°ì • ì‹œì‚¬ì                    â”‚
â”‚ - ì´ ë‚´ìš©ì´ ì™œ ì¤‘ìš”í•œê°€?             â”‚
â”‚ - ì–´ë–¤ íŒë‹¨ì— ì˜í–¥ì„ ë¯¸ì¹˜ëŠ”ê°€?        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**íŒŒì¼ ìœ„ì¹˜**: `app/services/section_normalizer.py` (ì‹ ê·œ)

```python
"""
ì„¹ì…˜ ì •ê·œí™” ì—”ì§„

ëª¨ë“  ë³´ê³ ì„œ ì„¹ì…˜ì„ ì¼ê´€ëœ êµ¬ì¡°ë¡œ ë³€í™˜
"""

from typing import Dict, Any, Optional


class SectionTemplate:
    """í‘œì¤€ ì„¹ì…˜ êµ¬ì¡°"""
    
    def __init__(
        self,
        section_number: str,
        section_title: str,
        key_message: str,         # í•µì‹¬ ìš”ì•½ (1-2ë¬¸ì¥)
        data_content: str,        # ë°ì´í„°/ì°¨íŠ¸ HTML
        analysis_content: str,    # í•´ì„/ë¶„ì„ HTML
        decision_insight: str     # ì˜ì‚¬ê²°ì • ì‹œì‚¬ì  (1-2ë¬¸ì¥)
    ):
        self.section_number = section_number
        self.section_title = section_title
        self.key_message = key_message
        self.data_content = data_content
        self.analysis_content = analysis_content
        self.decision_insight = decision_insight
    
    def to_html(self) -> str:
        """í‘œì¤€ HTML êµ¬ì¡°ë¡œ ë³€í™˜"""
        html = f"""
        <div class="section-normalized-v43" style="margin: 40px 0; page-break-inside: avoid;">
            <!-- Section Header -->
            <div class="section-title" style="font-size: 24px; font-weight: 700; color: #1F2937; margin-bottom: 20px;">
                {self.section_number}. {self.section_title}
            </div>
            
            <!-- Key Message Box -->
            <div class="key-message-box" style="
                background: linear-gradient(135deg, #EFF6FF, #DBEAFE);
                border-left: 4px solid #3B82F6;
                padding: 20px;
                border-radius: 8px;
                margin-bottom: 24px;
            ">
                <div style="font-size: 14px; font-weight: 600; color: #1E40AF; margin-bottom: 8px;">
                    ğŸ“Œ í•µì‹¬ ìš”ì•½
                </div>
                <div style="font-size: 15px; line-height: 1.7; color: #1F2937;">
                    {self.key_message}
                </div>
            </div>
            
            <!-- Data Content -->
            <div class="data-content" style="margin-bottom: 24px;">
                {self.data_content}
            </div>
            
            <!-- Analysis Content -->
            <div class="analysis-content" style="margin-bottom: 24px; line-height: 1.8;">
                {self.analysis_content}
            </div>
            
            <!-- Decision Insight Box -->
            <div class="decision-insight-box" style="
                background: linear-gradient(135deg, #ECFDF5, #D1FAE5);
                border-left: 4px solid #10B981;
                padding: 20px;
                border-radius: 8px;
            ">
                <div style="font-size: 14px; font-weight: 600; color: #065F46; margin-bottom: 8px;">
                    ğŸ’¡ ì˜ì‚¬ê²°ì • ì‹œì‚¬ì 
                </div>
                <div style="font-size: 15px; line-height: 1.7; color: #064E3B;">
                    {self.decision_insight}
                </div>
            </div>
        </div>
        """
        return html


def normalize_section_density(raw_content: str, section_info: Dict[str, Any]) -> str:
    """
    ê¸°ì¡´ ì„¹ì…˜ ì½˜í…ì¸ ë¥¼ ì •ê·œí™”ëœ êµ¬ì¡°ë¡œ ë³€í™˜
    
    Args:
        raw_content: ê¸°ì¡´ HTML ì½˜í…ì¸ 
        section_info: ì„¹ì…˜ ì •ë³´ (number, title, data)
    
    Returns:
        ì •ê·œí™”ëœ HTML
    """
    
    # 1. í•µì‹¬ ë©”ì‹œì§€ ì¶”ì¶œ (ì²« ë¬¸ë‹¨ ë˜ëŠ” ìë™ ìƒì„±)
    key_message = _extract_or_generate_key_message(raw_content, section_info)
    
    # 2. ë°ì´í„° ì½˜í…ì¸  ë¶„ë¦¬
    data_content = _extract_data_content(raw_content)
    
    # 3. ë¶„ì„ ì½˜í…ì¸  ë¶„ë¦¬
    analysis_content = _extract_analysis_content(raw_content)
    
    # 4. ì˜ì‚¬ê²°ì • ì‹œì‚¬ì  ìë™ ìƒì„±
    decision_insight = _generate_decision_insight(section_info)
    
    # 5. í…œí”Œë¦¿ ì ìš©
    section = SectionTemplate(
        section_number=section_info['number'],
        section_title=section_info['title'],
        key_message=key_message,
        data_content=data_content,
        analysis_content=analysis_content,
        decision_insight=decision_insight
    )
    
    return section.to_html()


def _extract_or_generate_key_message(content: str, info: Dict) -> str:
    """í•µì‹¬ ë©”ì‹œì§€ ì¶”ì¶œ ë˜ëŠ” ìë™ ìƒì„±"""
    # ê°„ë‹¨í•œ íœ´ë¦¬ìŠ¤í‹±: ì²« <p> íƒœê·¸ ë‚´ìš© or ìë™ ìƒì„±
    # ì‹¤ì œë¡œëŠ” ë” ì •êµí•œ ë¡œì§ í•„ìš”
    return f"{info['title']}ì— ëŒ€í•œ í•µì‹¬ ë¶„ì„ ê²°ê³¼ì…ë‹ˆë‹¤."


def _extract_data_content(content: str) -> str:
    """ë°ì´í„° ì½˜í…ì¸  (í‘œ, ì°¨íŠ¸) ì¶”ì¶œ"""
    # <table>, <div class="data-card"> ë“± ì¶”ì¶œ
    return content  # ê°„ì†Œí™”


def _extract_analysis_content(content: str) -> str:
    """ë¶„ì„ ì½˜í…ì¸  ì¶”ì¶œ"""
    return content  # ê°„ì†Œí™”


def _generate_decision_insight(info: Dict) -> str:
    """ì˜ì‚¬ê²°ì • ì‹œì‚¬ì  ìë™ ìƒì„±"""
    
    # ì„¹ì…˜ íƒ€ì…ë³„ í…œí”Œë¦¿
    templates = {
        "land_value": "í† ì§€ ê°€ì¹˜ í‰ê°€ ê²°ê³¼ëŠ” ì‚¬ì—… íƒ€ë‹¹ì„± íŒë‹¨ì˜ í•µì‹¬ ê¸°ì¤€ì´ ë©ë‹ˆë‹¤.",
        "financial": "ì¬ë¬´ ì§€í‘œëŠ” íˆ¬ì GO/NO-GO ê²°ì •ì— ì§ì ‘ì ì¸ ì˜í–¥ì„ ë¯¸ì¹©ë‹ˆë‹¤.",
        "risk": "ë¦¬ìŠ¤í¬ ê´€ë¦¬ ë°©ì•ˆì€ ì‚¬ì—… ì¶”ì§„ ì‹œ í•„ìˆ˜ ê²€í†  ì‚¬í•­ì…ë‹ˆë‹¤.",
    }
    
    section_type = info.get('type', 'general')
    return templates.get(section_type, "ì´ ë‚´ìš©ì€ ì „ì²´ ì‚¬ì—… íŒë‹¨ì— ì¤‘ìš”í•œ ê·¼ê±°ê°€ ë©ë‹ˆë‹¤.")
```

**ìƒˆ íŒŒì¼**: ì•½ 150 lines

#### Step 4.2: HTML Rendererì— ì •ê·œí™” ì ìš©

**íŒŒì¼ ìœ„ì¹˜**: `app/services/final_report_html_renderer.py`

**ìˆ˜ì • ì „ëµ**:
- ê¸°ì¡´ ì„¹ì…˜ HTMLì„ `normalize_section_density()` í•¨ìˆ˜ë¡œ ë˜í•‘
- ì ì§„ì  ì ìš© (ì„¹ì…˜ë³„ë¡œ í•˜ë‚˜ì”©)

**ì˜ˆì‹œ**:
```python
# Before
html = f"""
<div class="section">
    <div class="section-title">3. í† ì§€ ê°€ì¹˜ í‰ê°€</div>
    <p>í† ì§€ ê°€ì¹˜ëŠ” ...</p>
    <div class="data-card">...</div>
</div>
"""

# After
from app.services.section_normalizer import normalize_section_density

raw_section = f"""
<p>í† ì§€ ê°€ì¹˜ëŠ” ...</p>
<div class="data-card">...</div>
"""

normalized_html = normalize_section_density(
    raw_content=raw_section,
    section_info={
        'number': '3',
        'title': 'í† ì§€ ê°€ì¹˜ í‰ê°€',
        'type': 'land_value',
        'data': data
    }
)
```

**ë³€ê²½ ì‚¬í•­**:
- ì£¼ìš” ì„¹ì…˜ 10-15ê°œë¥¼ ì •ê·œí™” í…œí”Œë¦¿ìœ¼ë¡œ ë³€í™˜
- ê¸°ì¡´ HTML êµ¬ì¡° ìœ ì§€í•˜ë˜, í•µì‹¬ ìš”ì•½ ë°•ìŠ¤ + ì˜ì‚¬ê²°ì • ì‹œì‚¬ì  ì¶”ê°€

**ì˜ˆìƒ ìˆ˜ì • ë¼ì¸ ìˆ˜**: 200-300 lines

### 4.3 í…ŒìŠ¤íŠ¸ ê³„íš

```python
# test_section_normalizer.py

def test_section_template_structure():
    """ì„¹ì…˜ í…œí”Œë¦¿ HTML êµ¬ì¡° ê²€ì¦"""
    section = SectionTemplate(
        section_number="3",
        section_title="í† ì§€ ê°€ì¹˜ í‰ê°€",
        key_message="í† ì§€ ê°€ì¹˜ëŠ” 5ì–µì›ìœ¼ë¡œ í‰ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.",
        data_content="<table>...</table>",
        analysis_content="<p>ë¶„ì„ ë‚´ìš©...</p>",
        decision_insight="ì´ í‰ê°€ëŠ” ì‚¬ì—… íƒ€ë‹¹ì„± íŒë‹¨ì˜ í•µì‹¬ì…ë‹ˆë‹¤."
    )
    
    html = section.to_html()
    
    assert "section-normalized-v43" in html
    assert "ğŸ“Œ í•µì‹¬ ìš”ì•½" in html
    assert "ğŸ’¡ ì˜ì‚¬ê²°ì • ì‹œì‚¬ì " in html
```

### 4.4 ë°°í¬ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] `section_normalizer.py` ì‹ ê·œ ìƒì„±
- [ ] ì£¼ìš” ì„¹ì…˜ 10-15ê°œ ì •ê·œí™” ì ìš©
- [ ] ëª¨ë“  ì„¹ì…˜ì— í•µì‹¬ ìš”ì•½ ë°•ìŠ¤ í™•ì¸
- [ ] ëª¨ë“  ì„¹ì…˜ì— ì˜ì‚¬ê²°ì • ì‹œì‚¬ì  í™•ì¸
- [ ] í˜ì´ì§€ ë°€ë„ ìˆ˜ë™ ê²€ì¦

---

## ğŸ”§ Task 5: í™ˆí˜ì´ì§€ ë©”ì‹œì§€ â†” êµ¬í˜„ ë§¤í•‘

### 5.1 ë¬¸ì œ ì •ì˜

**í˜„ì¬ ìƒí™©**:
- í™ˆí˜ì´ì§€ íŠ¹ì¥ì  ë¬¸êµ¬ëŠ” ì¡´ì¬
- ì‹¤ì œ êµ¬í˜„ ìœ„ì¹˜ì™€ ì—°ê²° ë¬¸ì„œ ì—†ìŒ

**ëª©í‘œ**:
- ëª¨ë“  ë§ˆì¼€íŒ… ë©”ì‹œì§€ê°€ ì‹¤ì œ êµ¬í˜„ê³¼ 1:1 ë§¤í•‘
- ê³¼ì¥ ì—†ëŠ” ì •ì§í•œ ì œí’ˆ ì„¤ëª…

### 5.2 êµ¬í˜„ ê³„íš

**íŒŒì¼ ìƒì„±**: `PRODUCT_CLAIM_IMPLEMENTATION_MAP.md`

```markdown
# ZeroSite í™ˆí˜ì´ì§€ ë©”ì‹œì§€ â†” êµ¬í˜„ ë§¤í•‘

## ë©”ì‹œì§€ 1: "ì£¼ì†Œ í•˜ë‚˜ë¡œ ìµœì¢… ê²°ë¡  ì œê³µ"

**í™ˆí˜ì´ì§€ ë¬¸êµ¬**:
> ë³µì¡í•œ ì…ë ¥ ì—†ì´ ì£¼ì†Œë§Œ ì…ë ¥í•˜ë©´,  
> LH ë§¤ì…ì„ëŒ€ì‚¬ì—…ì˜ ìµœì¢… íŒë‹¨ì„ ì¦‰ì‹œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ì‹¤ì œ êµ¬í˜„**:
- **API ì—”ë“œí¬ì¸íŠ¸**: `POST /api/v3/land-report`
- **ì…ë ¥**: `{ "address": "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123" }`
- **ì²˜ë¦¬ íë¦„**:
  1. M1-M6 ëª¨ë“ˆ ì‹¤í–‰ (ì£¼ì†Œ â†’ í† ì§€ì •ë³´, ê°ì •í‰ê°€, ê°œë°œê·œëª¨ ë“±)
  2. canonical_summary ìƒì„±
  3. final_report_assemblerë¡œ All-in-One ë³´ê³ ì„œ ì¡°ë¦½
  4. ìµœìƒë‹¨ì— ê²°ë¡  ì¹´ë“œ (GO/CONDITIONAL/NO-GO) í‘œì‹œ
- **ì¦ëª… ì½”ë“œ ìœ„ì¹˜**:
  - `app/api/endpoints/reports_v3.py::create_land_report()`
  - `app/services/decision_card_component.py::create_decision_card()`
- **ê²°ê³¼ë¬¼**: PDF ë³´ê³ ì„œ 1í˜ì´ì§€ ìµœìƒë‹¨ì— ìµœì¢… íŒë‹¨ ì¹´ë“œ

---

## ë©”ì‹œì§€ 2: "50í˜ì´ì§€ ì´ìƒ ì „ë¬¸ ì»¨ì„¤íŒ… ë³´ê³ ì„œ"

**í™ˆí˜ì´ì§€ ë¬¸êµ¬**:
> ë‹¨ìˆœ ìš”ì•½ì´ ì•„ë‹Œ, ëŒ€í˜• ì»¨ì„¤íŒ…ì‚¬ ìˆ˜ì¤€ì˜  
> 50í˜ì´ì§€ ì´ìƒ ì¢…í•© ë¶„ì„ ë³´ê³ ì„œë¥¼ ì œê³µí•©ë‹ˆë‹¤.

**ì‹¤ì œ êµ¬í˜„**:
- **ë³´ê³ ì„œ ì¢…ë¥˜**: 6ê°€ì§€ (Landowner, LH Technical, Financial, Quick Check, All-in-One, Presentation)
- **í‰ê·  í˜ì´ì§€ ìˆ˜**: 52 pages
- **ì´ í˜ì´ì§€ ìˆ˜**: 310+ pages
- **ì¦ëª… ì½”ë“œ ìœ„ì¹˜**:
  - `app/services/final_report_html_renderer.py` (5,276 lines)
  - v4.2ì—ì„œ +1,419 lines ì¶”ê°€ (36.8% ì¦ê°€)
- **ë‚´ìš©**:
  - ì •ì±…Â·ì œë„ ë¶„ì„ (5ìš”ì†Œ)
  - ë¦¬ìŠ¤í¬ ë¶„ì„ (6ê°œ ë¦¬ìŠ¤í¬ Ã— 6ë‹¨ê³„ êµ¬ì¡°)
  - ì‹œë‚˜ë¦¬ì˜¤ ë¶„ì„ (3ê°œ ì‹œë‚˜ë¦¬ì˜¤ Ã— 3ê°€ì§€ ë³€í™”)
- **ê²€ì¦ ë°©ë²•**: PDF ìƒì„± í›„ í˜ì´ì§€ ìˆ˜ ì¹´ìš´íŠ¸

---

## ë©”ì‹œì§€ 3: "6ê°œ ë¦¬ìŠ¤í¬ ì¢…í•© ë¶„ì„"

**í™ˆí˜ì´ì§€ ë¬¸êµ¬**:
> ì •ì±… ë³€ë™, LH ì‹¬ì‚¬, í† ì§€ ê°€ê²©, ê±´ì¶• ê·œëª¨, ì¬ë¬´ êµ¬ì¡°, ì‚¬ì—… ì¼ì •  
> 6ëŒ€ ë¦¬ìŠ¤í¬ë¥¼ ì²´ê³„ì ìœ¼ë¡œ ë¶„ì„í•©ë‹ˆë‹¤.

**ì‹¤ì œ êµ¬í˜„**:
- **ë¦¬ìŠ¤í¬ ë§ˆìŠ¤í„°**: `RISK_MASTER_V4.2_FULL_TEXT.md` (16,692ì)
- **6ê°œ ë¦¬ìŠ¤í¬**:
  1. R1: ì •ì±…Â·ì œë„ ë³€ë™ ë¦¬ìŠ¤í¬
  2. R2: LH ì‹¬ì‚¬ ê¸°ì¤€ ë° ë‚´ë¶€ íŒë‹¨ ë¦¬ìŠ¤í¬
  3. R3: í† ì§€ ê°ì •í‰ê°€ ê°€ê²© ë° ì‹œì¥ ë³€ë™ ë¦¬ìŠ¤í¬
  4. R4: ê±´ì¶• ê·œëª¨ ë° ë²•ê·œ í•´ì„ ë¦¬ìŠ¤í¬
  5. R5: ì‚¬ì—… íƒ€ë‹¹ì„± ë° ì¬ë¬´ êµ¬ì¡° ë¦¬ìŠ¤í¬
  6. R6: ì‚¬ì—… ì¼ì • ë° í˜‘ìƒ ì§€ì—° ë¦¬ìŠ¤í¬
- **êµ¬ì¡°**: ê° ë¦¬ìŠ¤í¬ë³„ 6ë‹¨ê³„ ë¶„ì„
  1. ë¦¬ìŠ¤í¬ ì •ì˜
  2. ê·¼ë³¸ ì›ì¸
  3. ì‹¤ì œ ì‹œë‚˜ë¦¬ì˜¤
  4. ì˜í–¥ ë¶„ì„
  5. ì™„í™” ì „ëµ
  6. ì˜ì‚¬ê²°ì • ì—°ê³„
- **ì¦ëª… ì½”ë“œ ìœ„ì¹˜**:
  - `app/services/risk_master_rules.py` (v4.3ì—ì„œ ì¶”ê°€ ì˜ˆì •)
  - `app/services/final_report_html_renderer.py` ê° ë³´ê³ ì„œì˜ ë¦¬ìŠ¤í¬ ì„¹ì…˜
- **ë³´ê³ ì„œë³„ ì°¨ë³„í™”**: 
  - Landowner: R1, R3 ì¤‘ì‹¬, ì¹œí™”ì  í†¤
  - Financial: R3, R5, R6 ì¤‘ì‹¬, ë¶„ì„ì  í†¤
  - LH Technical: R1-R6 ì „ì²´, ê°ê´€ì  í†¤

---

## ë©”ì‹œì§€ 4: "3ê°€ì§€ ì‹œë‚˜ë¦¬ì˜¤ ë¶„ì„"

**í™ˆí˜ì´ì§€ ë¬¸êµ¬**:
> ê¸°ì¤€ì•ˆ, ë³´ìˆ˜ì•ˆ, ì ê·¹ì•ˆ 3ê°€ì§€ ì‹œë‚˜ë¦¬ì˜¤ë¡œ  
> ë‹¤ì–‘í•œ ì¡°ê±´ì—ì„œì˜ ì‚¬ì—… íƒ€ë‹¹ì„±ì„ ê²€í† í•©ë‹ˆë‹¤.

**ì‹¤ì œ êµ¬í˜„**:
- **ì‹œë‚˜ë¦¬ì˜¤ í”„ë ˆì„ì›Œí¬**: 3Ã—3 êµ¬ì¡°
  - 3ê°œ ì‹œë‚˜ë¦¬ì˜¤: Base Case, Conservative Case, Aggressive Case
  - 3ê°€ì§€ ë³€í™” ë¶„ì„: ìˆ˜ì¹˜ ë³€í™”, íŒë‹¨ ë³€í™”, ê²°ì • ê²°ê³¼
- **ì ìš© ë³´ê³ ì„œ**:
  - Landowner Report: 3ê°œ ì‹œë‚˜ë¦¬ì˜¤ (127 lines)
  - LH Technical Report: 3ê°œ ì‹œë‚˜ë¦¬ì˜¤ (201 lines)
  - Financial Report: 3ê°œ ì‹œë‚˜ë¦¬ì˜¤ (ê¸°ì¡´ v4.1)
- **ë¶„ì„ ë‚´ìš©**:
  - Base Case: NPV 8ì–µ, IRR 12.5%
  - Conservative: NPV 5ì–µ, IRR 10.2% (-2.3%p)
  - Aggressive: NPV 12ì–µ, IRR 14.8% (+2.3%p)
- **ì¦ëª… ì½”ë“œ ìœ„ì¹˜**:
  - `app/services/final_report_html_renderer.py`
  - Landowner: lines 1262-1389
  - LH Technical: lines 2063-2264
- **ì‹œê°í™”**: ì‹œë‚˜ë¦¬ì˜¤ ë¹„êµ í…Œì´ë¸” í¬í•¨

---

## ë©”ì‹œì§€ 5: "LH ìŠ¹ì¸ ê°€ëŠ¥ì„± ì˜ˆì¸¡"

**í™ˆí˜ì´ì§€ ë¬¸êµ¬**:
> AI ê¸°ë°˜ ë¶„ì„ìœ¼ë¡œ LH ìŠ¹ì¸ ê°€ëŠ¥ì„±ì„  
> ì •ëŸ‰ì ìœ¼ë¡œ ì˜ˆì¸¡í•©ë‹ˆë‹¤.

**ì‹¤ì œ êµ¬í˜„**:
- **ë°ì´í„° ì†ŒìŠ¤**: M6 LH ìŠ¹ì¸ ê°€ëŠ¥ì„± ë¶„ì„ ëª¨ë“ˆ
- **ë¶„ì„ ê¸°ì¤€**:
  - ì…ì§€ ì¡°ê±´ (30ì )
  - í† ì§€/ê°œë°œ ì¡°ê±´ (25ì )
  - ì‚¬ì—…ì„±/ê°€ê²© (20ì )
  - ì£¼íƒìœ í˜•/ìˆ˜ìš” (15ì )
  - ìˆ˜í–‰ëŠ¥ë ¥ (10ì )
- **ì¶œë ¥**:
  - ìŠ¹ì¸ ê°€ëŠ¥ì„± ë°±ë¶„ìœ¨ (0-100%)
  - ë“±ê¸‰ (A~D)
  - GO/CONDITIONAL/NO-GO íŒë‹¨
- **ì¦ëª… ì½”ë“œ ìœ„ì¹˜**:
  - `app/services/lh_analysis_canonical.py`
  - M6 ëª¨ë“ˆ: LH ìŠ¹ì¸ ê¸°ì¤€ í‰ê°€
- **ë³´ê³ ì„œ í‘œì‹œ**:
  - ê²°ë¡  ì¹´ë“œì— "LH ìŠ¹ì¸ ê°€ëŠ¥ì„± XX%" í‘œì‹œ
  - LH Technical Report: Section 7-8ì— ìƒì„¸ ë¶„ì„

---

## ê²€ì¦ ë°©ë²•

### ìë™ ê²€ì¦
```python
# test_product_claims.py

def test_claim_address_to_conclusion():
    """ì£¼ì†Œ ì…ë ¥ â†’ ìµœì¢… ê²°ë¡  ì œê³µ ê²€ì¦"""
    response = client.post("/api/v3/land-report", json={"address": "ì„œìš¸ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123"})
    assert response.status_code == 200
    
    report_id = response.json()["report_id"]
    report = client.get(f"/api/v3/land-report/{report_id}")
    
    # ê²°ë¡  ì¹´ë“œ ì¡´ì¬ í™•ì¸
    assert "decision_card" in report.json()
    assert report.json()["decision_card"]["decision"] in ["GO", "CONDITIONAL", "NO-GO"]


def test_claim_50_pages():
    """50í˜ì´ì§€ ì´ìƒ ë³´ê³ ì„œ ìƒì„± ê²€ì¦"""
    report_html = generate_report("all_in_one", context_id)
    pdf = html_to_pdf(report_html)
    
    page_count = count_pdf_pages(pdf)
    assert page_count >= 50


def test_claim_6_risks():
    """6ê°œ ë¦¬ìŠ¤í¬ ë¶„ì„ í¬í•¨ ê²€ì¦"""
    report_data = assemble_all_in_one_report(context_id, canonical_summary)
    
    risks = report_data.get("risks", [])
    risk_types = set([r["type"] for r in risks])
    
    expected_risks = {"R1", "R2", "R3", "R4", "R5", "R6"}
    assert risk_types >= expected_risks
```

### ìˆ˜ë™ ê²€ì¦
1. í™ˆí˜ì´ì§€ ê° ë©”ì‹œì§€ë¥¼ í•˜ë‚˜ì”© ì½ê¸°
2. ì´ ë¬¸ì„œì—ì„œ í•´ë‹¹ ë©”ì‹œì§€ ì°¾ê¸°
3. "ì¦ëª… ì½”ë“œ ìœ„ì¹˜" íŒŒì¼ ì—´ê¸°
4. ì‹¤ì œ êµ¬í˜„ í™•ì¸
5. ê³¼ì¥ ë˜ëŠ” í—ˆìœ„ ì—¬ë¶€ íŒë‹¨
```

**ìƒˆ íŒŒì¼**: ì•½ 400 lines

### 5.3 ë°°í¬ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] `PRODUCT_CLAIM_IMPLEMENTATION_MAP.md` ìƒì„±
- [ ] í™ˆí˜ì´ì§€ ì£¼ìš” ë©”ì‹œì§€ 5-10ê°œ ë§¤í•‘
- [ ] ê° ë©”ì‹œì§€ì— ëŒ€í•œ ì¦ëª… ì½”ë“œ ìœ„ì¹˜ ëª…ì‹œ
- [ ] ìë™ ê²€ì¦ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‘ì„±

---

## ğŸ“‹ v4.3 ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Exit Criteria (ì¢…ë£Œ ì¡°ê±´)

ë‹¤ìŒ ì¡°ê±´ì´ **ëª¨ë‘** ì¶©ì¡±ë˜ì–´ì•¼ v4.3 ì™„ë£Œ:

- [ ] **Task 1**: ë¶„ì„í™”ë©´ HTML = ìµœì¢…ë³´ê³ ì„œ ìš”ì•½ë³¸ (ë°ì´í„° ë™ì¼)
- [ ] **Task 2**: ë¦¬ìŠ¤í¬ ë§ˆìŠ¤í„° ì ìš© ê·œì¹™ ì½”ë“œí™” (report_typeë³„ ìë™ ì ìš©)
- [ ] **Task 3**: ê²°ë¡  ì¹´ë“œ 6ì¢… ë³´ê³ ì„œ ë™ì¼ ìœ„ì¹˜/í˜•ì‹
- [ ] **Task 4**: ëª¨ë“  ì„¹ì…˜ì— í•µì‹¬ ìš”ì•½ ë°•ìŠ¤ + ì˜ì‚¬ê²°ì • ì‹œì‚¬ì 
- [ ] **Task 5**: í™ˆí˜ì´ì§€ ë©”ì‹œì§€ â†” êµ¬í˜„ ë§¤í•‘ ë¬¸ì„œ ì¡´ì¬
- [ ] **Zero Question**: "ì´ê²Œ ì™œ ì´ë ‡ê²Œ ë‚˜ì™”ì£ ?" ì§ˆë¬¸ ë°œìƒí•˜ì§€ ì•ŠìŒ

### í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

```python
# test_v43_exit_criteria.py

def test_exit_criteria_1_data_unity():
    """ë¶„ì„í™”ë©´ê³¼ ìµœì¢…ë³´ê³ ì„œ ë°ì´í„° ì¼ì¹˜"""
    context_id = create_test_context()
    
    preview_data = get_report_data(context_id, is_preview=True)
    final_data = get_report_data(context_id, is_preview=False)
    
    assert preview_data['npv_krw'] == final_data['npv_krw']
    assert preview_data['overall_assessment'] == final_data['overall_assessment']


def test_exit_criteria_2_risk_automation():
    """ë¦¬ìŠ¤í¬ ìë™ ì ìš© ê·œì¹™ ë™ì‘"""
    # LandownerëŠ” R3ì„ HIGHë¡œ í¬í•¨
    landowner_risks = get_report_risks("landowner_summary", context_id)
    assert any(r['type'] == 'R3' and r['level'] == 'HIGH' for r in landowner_risks)
    
    # Financialì€ R3, R5, R6ì„ CRITICALë¡œ í¬í•¨
    financial_risks = get_report_risks("financial_feasibility", context_id)
    critical_risks = [r for r in financial_risks if r['level'] == 'CRITICAL']
    assert len(critical_risks) >= 3


def test_exit_criteria_3_decision_card():
    """ëª¨ë“  ë³´ê³ ì„œì— ê²°ë¡  ì¹´ë“œ ì¡´ì¬"""
    report_types = ["landowner_summary", "lh_technical", "financial_feasibility", 
                    "quick_check", "all_in_one", "presentation"]
    
    for report_type in report_types:
        html = generate_report(report_type, context_id)
        assert "decision-card-v43" in html
        assert "GO" in html or "CONDITIONAL" in html or "NO-GO" in html


def test_exit_criteria_4_section_normalization():
    """ëª¨ë“  ì„¹ì…˜ì— í•µì‹¬ ìš”ì•½ + ì‹œì‚¬ì """
    html = generate_report("all_in_one", context_id)
    
    # ìµœì†Œ 10ê°œ ì„¹ì…˜
    assert html.count("section-normalized-v43") >= 10
    
    # ê° ì„¹ì…˜ì— í•µì‹¬ ìš”ì•½ê³¼ ì‹œì‚¬ì  ì¡´ì¬
    assert html.count("ğŸ“Œ í•µì‹¬ ìš”ì•½") >= 10
    assert html.count("ğŸ’¡ ì˜ì‚¬ê²°ì • ì‹œì‚¬ì ") >= 10


def test_exit_criteria_5_claim_mapping():
    """í™ˆí˜ì´ì§€ ë©”ì‹œì§€ ë§¤í•‘ ë¬¸ì„œ ì¡´ì¬ ë° ìœ íš¨ì„±"""
    import os
    assert os.path.exists("PRODUCT_CLAIM_IMPLEMENTATION_MAP.md")
    
    with open("PRODUCT_CLAIM_IMPLEMENTATION_MAP.md") as f:
        content = f.read()
        
    # ìµœì†Œ 5ê°œ ë©”ì‹œì§€ ë§¤í•‘
    assert content.count("## ë©”ì‹œì§€") >= 5
    
    # ê° ë©”ì‹œì§€ì— ì¦ëª… ì½”ë“œ ìœ„ì¹˜ ëª…ì‹œ
    assert content.count("**ì¦ëª… ì½”ë“œ ìœ„ì¹˜**:") >= 5
```

---

## ğŸš€ ë°°í¬ ê³„íš

### Phase 1: ê°œë°œ (ì˜ˆìƒ 9-13ì‹œê°„)

1. **Task 1** (3-4ì‹œê°„): ë¶„ì„í™”ë©´ í†µí•©
   - Day 1 Morning: final_report_assembler ìˆ˜ì •
   - Day 1 Afternoon: API ìˆ˜ì • ë° í…ŒìŠ¤íŠ¸

2. **Task 2** (2-3ì‹œê°„): ë¦¬ìŠ¤í¬ ì‹œìŠ¤í…œí™”
   - Day 1 Evening: risk_master_rules êµ¬í˜„
   - Day 2 Morning: assembler í†µí•©

3. **Task 3** (1-2ì‹œê°„): ê²°ë¡  ì¹´ë“œ
   - Day 2 Afternoon: decision_card_component êµ¬í˜„

4. **Task 4** (2-3ì‹œê°„): í˜ì´ì§€ ë°€ë„
   - Day 2 Evening: section_normalizer êµ¬í˜„

5. **Task 5** (1ì‹œê°„): í™ˆí˜ì´ì§€ ë§¤í•‘
   - Day 3 Morning: ë¬¸ì„œ ì‘ì„±

### Phase 2: í…ŒìŠ¤íŠ¸ (ì˜ˆìƒ 2-3ì‹œê°„)

1. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (ê° Taskë³„)
2. í†µí•© í…ŒìŠ¤íŠ¸ (Exit Criteria)
3. ìˆ˜ë™ ê²€ì¦ (ë³´ê³ ì„œ í’ˆì§ˆ)

### Phase 3: ë¬¸ì„œí™” ë° ë°°í¬ (ì˜ˆìƒ 1-2ì‹œê°„)

1. v4.3 ì™„ë£Œ ë³´ê³ ì„œ ì‘ì„±
2. Git ì»¤ë°‹ ë° Push
3. Pull Request ìƒì„±
4. ë¦¬ë·° ë° ë¨¸ì§€

**ì´ ì˜ˆìƒ ì‹œê°„**: 12-18ì‹œê°„ (2-3ì¼)

---

## ğŸ“Š ì˜ˆìƒ ì½”ë“œ ë³€ê²½ëŸ‰

| í•­ëª© | ì‹ ê·œ íŒŒì¼ | ìˆ˜ì • íŒŒì¼ | ì˜ˆìƒ ë¼ì¸ |
|------|----------|-----------|-----------|
| Task 1 | 0 | 2 | +80 |
| Task 2 | 2 | 1 | +600 |
| Task 3 | 1 | 1 | +260 |
| Task 4 | 1 | 1 | +350 |
| Task 5 | 1 (ë¬¸ì„œ) | 0 | +400 chars |
| **ì´í•©** | **5** | **5** | **+1,290 lines** |

---

## âš ï¸ ìœ„í—˜ ìš”ì†Œ ë° ëŒ€ì‘

| ìœ„í—˜ | í™•ë¥  | ì˜í–¥ | ëŒ€ì‘ ë°©ì•ˆ |
|------|------|------|-----------|
| API í˜¸ì¶œ ì§€ì  ëˆ„ë½ (Task 1) | ì¤‘ê°„ | ë†’ìŒ | ì „ì²´ grep ê²€ìƒ‰, ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ |
| ë¦¬ìŠ¤í¬ ì½˜í…ì¸  í’ˆì§ˆ (Task 2) | ë‚®ìŒ | ì¤‘ê°„ | ìƒ˜í”Œ ê²€ì¦, ì‚¬ìš©ì í”¼ë“œë°± |
| ê²°ë¡  ì¹´ë“œ ë””ìì¸ (Task 3) | ë‚®ìŒ | ë‚®ìŒ | ë””ìì´ë„ˆ ë¦¬ë·° |
| ì„¹ì…˜ ì •ê·œí™” ê³¼ë„ (Task 4) | ì¤‘ê°„ | ì¤‘ê°„ | ì ì§„ì  ì ìš©, A/B í…ŒìŠ¤íŠ¸ |
| ì„±ëŠ¥ ì €í•˜ | ë‚®ìŒ | ì¤‘ê°„ | í”„ë¡œíŒŒì¼ë§, ìºì‹± |

---

## ğŸ¯ ì„±ê³µ ê¸°ì¤€

v4.3ì´ ì„±ê³µí–ˆë‹¤ê³  íŒë‹¨í•˜ëŠ” ê¸°ì¤€:

1. **ê¸°ìˆ ì  ì„±ê³µ**:
   - ëª¨ë“  Exit Criteria í†µê³¼ âœ…
   - í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ 80% ì´ìƒ âœ…
   - ì„±ëŠ¥ ì €í•˜ 20% ì´ë‚´ âœ…

2. **ì‚¬ìš©ì ê²½í—˜ ì„±ê³µ**:
   - "ë¶„ì„í™”ë©´ê³¼ ë³´ê³ ì„œê°€ ë‹¤ë¥´ë‹¤" ì§ˆë¬¸ 0ê±´ âœ…
   - "ì´ê²Œ ì™œ ì´ë ‡ê²Œ ë‚˜ì™”ë‚˜ìš”?" ì§ˆë¬¸ 0ê±´ âœ…
   - ë³´ê³ ì„œ í’ˆì§ˆì— ëŒ€í•œ ê¸ì •ì  í”¼ë“œë°± âœ…

3. **ì œí’ˆ ì™„ì„±ë„ ì„±ê³µ**:
   - ì™¸ë¶€ ì»¨ì„¤íŒ…ì‚¬ ë³´ê³ ì„œì™€ ë¹„êµ ì‹œ ë™ë“± ì´ìƒ âœ…
   - ì¶”ê°€ ì„¤ëª… ì—†ì´ ë³´ê³ ì„œë§Œìœ¼ë¡œ íŒë‹¨ ê°€ëŠ¥ âœ…
   - ë§ˆì¼€íŒ… ë©”ì‹œì§€ = ì‹¤ì œ êµ¬í˜„ 100% ì¼ì¹˜ âœ…

---

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„ (v4.3 ì´í›„)

v4.3 ì™„ë£Œ í›„ ê°€ëŠ¥í•œ ë°©í–¥:

1. **v4.4: UI/UX ìµœì í™”**
   - ëŒ€ì‹œë³´ë“œ ê°œì„ 
   - ëª¨ë°”ì¼ ìµœì í™”
   - ì¸í„°ë™í‹°ë¸Œ ì°¨íŠ¸

2. **v4.5: ìë™í™” ê°•í™”**
   - ë³´ê³ ì„œ ìƒì„± ì‹œê°„ ë‹¨ì¶•
   - ìºì‹± ì „ëµ ê³ ë„í™”
   - ë°°ì¹˜ ì²˜ë¦¬

3. **v5.0: ê¸°ëŠ¥ í™•ì¥**
   - ì—¬ëŸ¬ í† ì§€ ë¹„êµ ë¶„ì„
   - ì§€ì—­ë³„ ì‹œì¥ ë™í–¥ ë¶„ì„
   - LH ì™¸ ë‹¤ë¥¸ ë§¤ì… í”„ë¡œê·¸ë¨ ì§€ì›

---

## ğŸ“Œ ì°¸ê³  ë¬¸ì„œ

- `V4.2_FINAL_HARDENING_COMPLETE.md`: v4.2 ì™„ë£Œ ë³´ê³ ì„œ
- `RISK_MASTER_V4.2_FULL_TEXT.md`: ë¦¬ìŠ¤í¬ ë§ˆìŠ¤í„° ì›ë³¸
- `app/services/final_report_assembler.py`: ë³´ê³ ì„œ ë°ì´í„° ì¡°ë¦½
- `app/services/final_report_html_renderer.py`: HTML ë Œë”ë§ (5,276 lines)

---

**ì‘ì„±ì**: Claude (Anthropic)  
**ê²€í†  í•„ìš”**: Yes  
**ìš°ì„ ìˆœìœ„**: Critical  
**ì˜ˆìƒ ì™„ë£Œì¼**: 2025-12-25

---

## ğŸ”’ ìµœì¢… ì„ ì–¸

> **v4.3ì€ ZeroSiteë¥¼ 'ì™„ì„±ëœ ì œí’ˆ'ìœ¼ë¡œ ì ê·¸ëŠ”(Lock-in) ìµœì¢… ë²„ì „ì…ë‹ˆë‹¤.**
> 
> v4.3 ì™„ë£Œ í›„, ZeroSiteëŠ”:
> - ì„¤ëª…ì´ í•„ìš” ì—†ëŠ” ì œí’ˆ âœ…
> - ì¼ê´€ì„± 100% ë³´ì¥ âœ…
> - ì™¸ë¶€ ì»¨ì„¤íŒ…ì‚¬ í’ˆì§ˆ âœ…
> 
> **ì´ ìƒíƒœê°€ ë˜ë©´, ì œí’ˆì€ ì™„ì„±ì…ë‹ˆë‹¤.**

---

**END OF v4.3 IMPLEMENTATION PLAN**
