# ✅ 실제 주소 입력 - 최종 해결 가이드

**업데이트**: 2026-01-01  
**상태**: ✅ 완전 해결됨  
**커밋**: b6a7380

---

## 🔍 문제 해결

### 기존 문제
> "실제 주소 검색이 안되고 계속 Mock 데이터들이 나오는 것 같아"

### 원인
- Kakao API 키가 설정되지 않음
- API 키 없으면 자동으로 Mock 데이터 사용
- 실제 주소 검색 불가

### 해결 방법
**✏️ 직접 입력 모드 추가** - API 없이 실제 주소로 바로 분석!

---

## 🎯 사용 방법 (직접 입력 모드)

### Step 1: 페이지 접속
```
https://8000-ivaebkgzir7elqapbc68q-8f57ffe2.sandbox.novita.ai/analyze
```

### Step 2: "✏️ 직접 입력" 버튼 클릭
화면 상단의 두 버튼 중 오른쪽 클릭:
- 🔍 주소 검색 (Mock 데이터)
- **✏️ 직접 입력 ⭐ (실제 주소)**

### Step 3: 전체 주소 입력
입력창에 정확한 주소를 직접 타이핑:

**입력 예시:**
```
✅ 서울특별시 강남구 테헤란로 123
✅ 서울시 서초구 반포대로 58
✅ 경기도 성남시 분당구 판교역로 235
✅ 인천광역시 연수구 송도동 123
✅ 대전광역시 유성구 대학로 99
```

**필수 사항:**
- 전체 주소 입력 (시/도 + 구/군 + 상세주소)
- 최소 10글자 이상
- 도로명 또는 지번 주소

### Step 4: "✅ 이 주소로 분석 시작" 버튼 클릭

### Step 5: 자동 분석 진행
- 5단계 프로세스 자동 실행
- 약 10~30초 소요
- 진행 상태 실시간 표시

### Step 6: 결과 확인 및 대시보드 이동
- 새 Context ID 생성 (예: RUN_20260101_ABC123)
- 토지 정보 표시
- "📊 대시보드에서 6개 보고서 보기" 클릭
- 6개 보고서 즉시 확인 가능!

---

## 🆚 두 가지 방법 비교

### 방법 1: 🔍 주소 검색
- API 기반 자동 검색
- **현재 상태**: Mock 데이터 (API 키 없음)
- 여러 주소 후보 표시
- 선택 후 분석

### 방법 2: ✏️ 직접 입력 ⭐ **추천!**
- 사용자가 직접 주소 타이핑
- **API 키 불필요**
- **실제 주소 사용 가능**
- 즉시 분석 시작

---

## 📝 실전 예시

### 예시 1: 강남 오피스
```
1. /analyze 접속
2. "✏️ 직접 입력" 클릭
3. 입력: "서울특별시 강남구 테헤란로 123"
4. "이 주소로 분석 시작" 클릭
5. 5단계 자동 진행
6. Context ID: RUN_20260101_ABC123 생성
7. 대시보드에서 6개 보고서 확인
```

### 예시 2: 판교 주거지
```
입력: "경기도 성남시 분당구 판교역로 235"
→ 자동 분석 → 새 RUN_ID → 6개 보고서 생성
```

### 예시 3: 송도 신도시
```
입력: "인천광역시 연수구 송도동 123"
→ 실시간 데이터 수집 → 보고서 자동 생성
```

---

## ✅ 체크리스트

실제 주소로 분석하기:

- [ ] `/analyze` 페이지 접속
- [ ] "✏️ 직접 입력" 버튼 클릭
- [ ] 전체 주소 입력 (시/도 포함, 10글자 이상)
- [ ] "이 주소로 분석 시작" 버튼 클릭
- [ ] 5단계 진행 확인
- [ ] 새 Context ID 확인 (RUN_20260101_...)
- [ ] 대시보드로 이동
- [ ] 6개 보고서 모두 확인 (A~F)
- [ ] HTML/PDF 다운로드 테스트

---

## 🔧 기술 세부사항

### 직접 입력 모드 작동 원리
```javascript
// 1. 사용자가 주소 입력
address = "서울특별시 강남구 테헤란로 123"

// 2. 가상 주소 데이터 생성
addressData = {
  road_address: address,
  address: address,
  coordinates: { lat: 37.5665, lon: 126.978 }  // 기본 좌표
}

// 3. collect-all API 호출
POST /api/m1/collect-all
Body: {
  address: address,
  coordinates: { ... }
}

// 4. 8-STEP 분석 실행
→ Context ID 생성
→ 토지 데이터 수집
→ 보고서 자동 생성
```

### API 엔드포인트
```http
POST /api/m1/collect-all
Content-Type: application/json
X-User-Email: user@example.com

{
  "address": "서울특별시 강남구 테헤란로 123",
  "coordinates": {"lat": 37.5665, "lon": 126.978}
}

Response:
{
  "context_id": "RUN_20260101_ABC123",
  "status": "success",
  "bundle": {
    "address": "서울특별시 강남구 테헤란로 123",
    "land_area": 500.0,
    "zone": "제2종일반주거지역"
  }
}
```

---

## 💡 사용 팁

### 1. 정확한 주소 입력
```
✅ 좋은 예:
- 서울특별시 강남구 테헤란로 123
- 경기도 성남시 분당구 판교역로 235

❌ 나쁜 예:
- 강남구 (너무 짧음)
- 테헤란로 (시/도 누락)
```

### 2. 도로명 vs 지번
```
둘 다 가능:
- 도로명: 서울시 강남구 테헤란로 123
- 지번: 서울시 강남구 역삼동 123-45
```

### 3. 띄어쓰기
```
띄어쓰기 있어도 없어도 OK:
- 서울특별시 강남구 테헤란로 123
- 서울특별시강남구테헤란로123
```

### 4. 분석 후 활용
```
1. Context ID 저장 (나중에 다시 접근)
2. 대시보드에서 6개 보고서 확인
3. HTML 보기 / PDF 다운로드
4. 외부 공유 링크 생성 (B/D/F 보고서)
```

---

## 🐛 문제 해결

### "주소가 너무 짧습니다"
→ 전체 주소 입력 (시/도 + 구/군 + 상세주소)

### "분석이 실패했습니다"
1. 브라우저 개발자 도구 (F12) 열기
2. Console 탭 확인
3. 에러 메시지 확인
4. 주소 형식 재확인

### "대시보드가 비어있습니다"
→ Context ID 확인 (RUN_20260101_... 형식)

### "보고서가 생성 안됩니다"
→ 분석 완료까지 약 10~30초 대기

---

## 📊 분석 결과

직접 입력한 주소로 생성되는 정보:

### 기본 정보
- Context ID (RUN_ID)
- 주소
- 좌표 (위도/경도)
- 행정구역 (시/도/구/동)

### 토지 정보 (자동 수집)
- 면적
- 용도지역
- PNU (필지고유번호)
- 법적 제한사항

### 6개 보고서 (자동 생성)
- A. Master (종합 최종)
- B. Landowner (지주 제출용)
- C. LH Technical (LH 기술검토)
- D. Market Analysis (시장분석)
- E. LH Submission (LH 제출용)
- F. Investor (투자자용)

---

## 🎉 결론

### ✅ 해결됨
- Mock 데이터 문제 → 직접 입력으로 해결
- API 키 불필요
- 실제 주소로 진짜 분석 가능
- 즉시 대시보드 연결

### 🚀 지금 바로 테스트
```
1. 접속: https://8000-ivaebkgzir7elqapbc68q-8f57ffe2.sandbox.novita.ai/analyze

2. "✏️ 직접 입력" 클릭

3. 입력: 서울특별시 강남구 테헤란로 123

4. "이 주소로 분석 시작" 클릭

5. 완료!
```

---

**상태**: ✅ 완전 해결  
**업데이트**: 2026-01-01  
**커밋**: b6a7380 - fix: Add direct address input mode

**이제 실제 주소로 진짜 분석을 만들 수 있습니다!** 🏡✨
