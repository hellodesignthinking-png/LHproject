<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¯ ZeroSite Expert Edition v3 - ì²­ë…„ì£¼íƒ ê°œë°œ íƒ€ë‹¹ì„± ë¶„ì„</title>
    
    <!-- CACHE PREVENTION -->
    <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 40px 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 50px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 50px;
            padding: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            color: white;
        }
        
        .version-badge {
            display: inline-block;
            background: rgba(255,255,255,0.25);
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 20px;
            letter-spacing: 1px;
        }
        
        h1 {
            font-size: 36px;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .subtitle {
            font-size: 18px;
            opacity: 0.95;
            font-weight: 300;
        }
        
        .info-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 30px;
            border-left: 5px solid #667eea;
        }
        
        .info-section h2 {
            color: #667eea;
            font-size: 20px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
            font-size: 15px;
        }
        
        label .required {
            color: #ef4444;
            margin-left: 5px;
        }
        
        input, select {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s;
            font-family: inherit;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
        }
        
        .input-group {
            display: flex;
            gap: 15px;
        }
        
        .input-group > div {
            flex: 1;
        }
        
        .button-primary {
            width: 100%;
            padding: 20px;
            font-size: 18px;
            font-weight: 700;
            border: none;
            border-radius: 12px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
            letter-spacing: 1px;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        
        .button-primary:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
        }
        
        .button-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .button-secondary {
            padding: 18px 35px;
            font-size: 16px;
            font-weight: 600;
            border: 2px solid #667eea;
            border-radius: 10px;
            background: white;
            color: #667eea;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .button-secondary:hover:not(:disabled) {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }
        
        .button-secondary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .results {
            display: none;
            margin-top: 50px;
            padding: 40px;
            background: #f1f5f9;
            border-radius: 15px;
            border-left: 6px solid #10b981;
        }
        
        .results.show {
            display: block;
            animation: slideIn 0.5s ease-out;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .results h2 {
            color: #10b981;
            font-size: 26px;
            margin-bottom: 25px;
        }
        
        .download-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 40px;
            color: #667eea;
        }
        
        .loading.show {
            display: block;
        }
        
        .spinner {
            border: 4px solid #f3f4f6;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .error {
            display: none;
            padding: 25px;
            background: #fef2f2;
            border-left: 5px solid #ef4444;
            border-radius: 10px;
            color: #991b1b;
            margin-top: 20px;
        }
        
        .error.show {
            display: block;
        }
        
        .success-message {
            padding: 20px;
            background: #f0fdf4;
            border-left: 5px solid #10b981;
            border-radius: 10px;
            color: #14532d;
            margin-bottom: 25px;
        }
        
        .meta-info {
            font-size: 14px;
            color: #6b7280;
            margin-top: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
        }
        
        .meta-info strong {
            color: #374151;
        }
        
        .feature-list {
            list-style: none;
            padding: 0;
            margin-top: 20px;
        }
        
        .feature-list li {
            padding: 12px 0;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .feature-list li:last-child {
            border-bottom: none;
        }
        
        .feature-icon {
            width: 24px;
            height: 24px;
            background: #667eea;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            flex-shrink: 0;
        }
        
        .footer {
            margin-top: 60px;
            padding-top: 30px;
            border-top: 2px solid #e5e7eb;
            text-align: center;
            color: #6b7280;
            font-size: 14px;
        }
    </style>
</head>
<body>

<div class="container">
    <!-- HEADER -->
    <div class="header">
        <div class="version-badge">EXPERT EDITION v3.0</div>
        <h1>ğŸ¡ ZeroSite</h1>
        <div class="subtitle">ì²­ë…„ì£¼íƒ ê°œë°œ íƒ€ë‹¹ì„± ì „ë¬¸ê°€ ë¶„ì„ ì‹œìŠ¤í…œ</div>
    </div>

    <!-- INFO SECTION -->
    <div class="info-section">
        <h2>ğŸ“Š v3 ë³´ê³ ì„œ íŠ¹ì§•</h2>
        <ul class="feature-list">
            <li>
                <div class="feature-icon">âœ“</div>
                <div><strong>Academic Research-Grade Report</strong> - í•™ìˆ  ì—°êµ¬ê¸‰ ì „ë¬¸ ë³´ê³ ì„œ (60+ pages)</div>
            </li>
            <li>
                <div class="feature-icon">âœ“</div>
                <div><strong>ZeroSite v15 Phase 2</strong> - LH ì •ì±…ìê¸ˆ ì‚¬ì—… íƒ€ë‹¹ì„± ë¶„ì„</div>
            </li>
            <li>
                <div class="feature-icon">âœ“</div>
                <div><strong>7ê°œ ì„¹ì…˜ ì‹¬ì¸µ ë¶„ì„</strong> - Executive Summary, ëŒ€ìƒì§€ ê°œìš”, ë„ì‹œê³„íš/ë²•ê·œ, AI ìˆ˜ìš”ì˜ˆì¸¡, ì‹œì¥ë¶„ì„, ê³µì‚¬ë¹„, ì¬ë¬´ë¶„ì„</div>
            </li>
            <li>
                <div class="feature-icon">âœ“</div>
                <div><strong>Professional Typography</strong> - ì„¸ë ¨ëœ ë””ìì¸ + Blue(#0059c8) ì»¬ëŸ¬ ìŠ¤í‚´</div>
            </li>
            <li>
                <div class="feature-icon">âœ“</div>
                <div><strong>PDF ë‹¤ìš´ë¡œë“œ</strong> - ì¦‰ì‹œ ì¶œë ¥ ê°€ëŠ¥í•œ ì „ë¬¸ê°€ê¸‰ ë³´ê³ ì„œ</div>
            </li>
        </ul>
    </div>

    <!-- INPUT FORM -->
    <form id="reportForm">
        <div class="form-group">
            <label for="address">
                ğŸ“ ëŒ€ìƒ í† ì§€ ì£¼ì†Œ 
                <span class="required">*</span>
            </label>
            <input 
                type="text" 
                id="address" 
                name="address" 
                placeholder="ì˜ˆ: ì„œìš¸íŠ¹ë³„ì‹œ ë§ˆí¬êµ¬ ì›”ë“œì»µë¶ë¡œ 120"
                required
            >
        </div>

        <div class="input-group">
            <div class="form-group">
                <label for="land_area">
                    ğŸ“ ëŒ€ì§€ë©´ì  (ã¡)
                    <span class="required">*</span>
                </label>
                <input 
                    type="number" 
                    id="land_area" 
                    name="land_area" 
                    placeholder="ì˜ˆ: 30.0"
                    step="0.1"
                    min="0"
                    required
                >
            </div>

            <div class="form-group">
                <label for="unit_type">
                    ğŸ  ì£¼íƒ ìœ í˜•
                    <span class="required">*</span>
                </label>
                <select id="unit_type" name="unit_type" required>
                    <option value="">-- ì„ íƒí•˜ì„¸ìš” --</option>
                    <option value="ì²­ë…„">ì²­ë…„</option>
                    <option value="ì‹ í˜¼ë¶€ë¶€I">ì‹ í˜¼ë¶€ë¶€ I</option>
                    <option value="ì‹ í˜¼ë¶€ë¶€II">ì‹ í˜¼ë¶€ë¶€ II</option>
                    <option value="ê³ ë ¹ì">ê³ ë ¹ì</option>
                    <option value="ë‹¤ìë…€">ë‹¤ìë…€</option>
                </select>
            </div>
        </div>

        <div class="form-group">
            <label for="zone_type">
                ğŸ—ºï¸ ìš©ë„ì§€ì—­
            </label>
            <input 
                type="text" 
                id="zone_type" 
                name="zone_type" 
                placeholder="ìë™ íƒì§€ (ì„ íƒì‚¬í•­)"
            >
        </div>

        <div class="form-group">
            <label for="land_appraisal_price">
                ğŸ’° í† ì§€ ê°ì •ê°€ (ì›)
            </label>
            <input 
                type="number" 
                id="land_appraisal_price" 
                name="land_appraisal_price" 
                placeholder="ì˜ˆ: 5000000000 (ì„ íƒì‚¬í•­)"
                step="1000000"
                min="0"
            >
        </div>

        <button type="submit" class="button-primary" id="generateBtn">
            ğŸ“„ Expert Edition v3 ë³´ê³ ì„œ ìƒì„±
        </button>
    </form>

    <!-- LOADING -->
    <div class="loading" id="loading">
        <div class="spinner"></div>
        <p style="font-size: 18px; font-weight: 600;">ë³´ê³ ì„œ ìƒì„± ì¤‘...</p>
        <p style="margin-top: 10px; color: #6b7280;">v3 Expert Edition í…œí”Œë¦¿ ì ìš© ì¤‘ (ì•½ 30-60ì´ˆ ì†Œìš”)</p>
    </div>

    <!-- ERROR -->
    <div class="error" id="error">
        <strong>âŒ ì˜¤ë¥˜ ë°œìƒ</strong>
        <p id="errorMessage" style="margin-top: 10px;"></p>
    </div>

    <!-- RESULTS -->
    <div class="results" id="results">
        <div class="success-message">
            <strong>âœ… Expert Edition v3 ë³´ê³ ì„œ ìƒì„± ì™„ë£Œ!</strong>
            <p style="margin-top: 8px;">ì „ë¬¸ê°€ê¸‰ 60+ í˜ì´ì§€ ë³´ê³ ì„œê°€ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
        </div>

        <h2>ğŸ“¥ ë³´ê³ ì„œ ë‹¤ìš´ë¡œë“œ</h2>
        
        <div class="download-buttons">
            <button class="button-secondary" id="downloadPdfBtn">
                ğŸ“„ PDF ë‹¤ìš´ë¡œë“œ
            </button>
            <button class="button-secondary" id="downloadHtmlBtn">
                ğŸŒ HTML ë‹¤ìš´ë¡œë“œ
            </button>
        </div>

        <div class="meta-info">
            <strong>ìƒì„± ì •ë³´:</strong><br>
            ë¶„ì„ ID: <span id="analysisId">-</span><br>
            ìƒì„± ì‹œê°: <span id="generatedAt">-</span><br>
            ë³´ê³ ì„œ ë²„ì „: <strong>ZeroSite Expert Edition v3</strong>
        </div>
    </div>

    <!-- FOOTER -->
    <div class="footer">
        <strong>ZeroSite Expert Edition v3</strong><br>
        Academic Research-Grade Land Valuation Report System<br>
        Â© 2025 Antenna Holdings. All rights reserved.
    </div>
</div>

<script>
    const API_BASE = window.location.origin;
    const REPORT_API_URL = `${API_BASE}/api/v9/real/generate-report`;

    const form = document.getElementById('reportForm');
    const loading = document.getElementById('loading');
    const error = document.getElementById('error');
    const results = document.getElementById('results');
    const generateBtn = document.getElementById('generateBtn');

    let currentReportData = null;

    // Form submit handler
    form.addEventListener('submit', async (e) => {
        e.preventDefault();
        await generateReport();
    });

    async function generateReport() {
        // Hide previous results/errors
        results.classList.remove('show');
        error.classList.remove('show');
        
        // Show loading
        loading.classList.add('show');
        generateBtn.disabled = true;

        try {
            // Collect form data
            const formData = new FormData(form);
            const requestBody = {
                address: formData.get('address'),
                land_area: parseFloat(formData.get('land_area')),
                unit_type: formData.get('unit_type'),
                zone_type: formData.get('zone_type') || undefined,
                land_appraisal_price: formData.get('land_appraisal_price') 
                    ? parseInt(formData.get('land_appraisal_price'))
                    : undefined
            };

            console.log('Generating Expert v3 report...', requestBody);

            // Call API (HTML version first to get data)
            const timestamp = Date.now();
            const response = await fetch(`${REPORT_API_URL}?output_format=html&_t=${timestamp}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(requestBody)
            });

            if (!response.ok) {
                throw new Error(`API Error: ${response.status} ${response.statusText}`);
            }

            const blob = await response.blob();
            currentReportData = {
                htmlBlob: blob,
                requestBody: requestBody,
                timestamp: timestamp
            };

            // Show results
            loading.classList.remove('show');
            results.classList.add('show');
            generateBtn.disabled = false;

            // Update metadata
            document.getElementById('analysisId').textContent = `v3-${timestamp}`;
            document.getElementById('generatedAt').textContent = new Date().toLocaleString('ko-KR');

            console.log('âœ… Expert v3 report generated successfully');

        } catch (err) {
            console.error('Report generation failed:', err);
            
            loading.classList.remove('show');
            error.classList.add('show');
            generateBtn.disabled = false;
            
            document.getElementById('errorMessage').textContent = err.message;
        }
    }

    // PDF download handler
    document.getElementById('downloadPdfBtn').addEventListener('click', async () => {
        if (!currentReportData) return;

        const btn = document.getElementById('downloadPdfBtn');
        btn.disabled = true;
        btn.textContent = 'â³ PDF ìƒì„± ì¤‘...';

        try {
            const timestamp = Date.now();
            const response = await fetch(`${REPORT_API_URL}?output_format=pdf&_t=${timestamp}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(currentReportData.requestBody)
            });

            if (!response.ok) {
                throw new Error('PDF ìƒì„± ì‹¤íŒ¨');
            }

            const blob = await response.blob();
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ZeroSite_ExpertEdition_v3_${timestamp}.pdf`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            btn.textContent = 'âœ… PDF ë‹¤ìš´ë¡œë“œ ì™„ë£Œ';
            setTimeout(() => {
                btn.textContent = 'ğŸ“„ PDF ë‹¤ìš´ë¡œë“œ';
                btn.disabled = false;
            }, 2000);

        } catch (err) {
            console.error('PDF download failed:', err);
            alert('PDF ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨: ' + err.message);
            btn.textContent = 'ğŸ“„ PDF ë‹¤ìš´ë¡œë“œ';
            btn.disabled = false;
        }
    });

    // HTML download handler
    document.getElementById('downloadHtmlBtn').addEventListener('click', () => {
        if (!currentReportData || !currentReportData.htmlBlob) return;

        const url = URL.createObjectURL(currentReportData.htmlBlob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `ZeroSite_ExpertEdition_v3_${currentReportData.timestamp}.html`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
    });
</script>

</body>
</html>
